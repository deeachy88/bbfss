{% extends 'common_dashboard.html' %}
{% load crispy_forms_tags %}
{% block content %}
<style>
option {
    background-color: white !important;
}
.custom-control {
    margin-bottom: 0;
    margin-top: 6px;
    min-height: 1.3rem;
}
.custom-control-input:checked ~ .custom-control-label::before {
  color: #fff;
  border-color: #7B1FA2;
  background-color: #7B1FA2;
}
form, input, select, textarea{
    color: black !important;
}
</style>

<div class="card">
    <div class="card-header">
        <h4 class="card-title">Import Permit For Plant And Plant Products</h4>
    </div>
    <div class="card-body">
        <form method="post" id="importForm">
            {% csrf_token %}
            <input type="text" id="applicationNo" name="applicationNo" style="display:none">
            <div class="row justify-content-left">
                <ul class="nav nav-pills nav-secondary" id="import-tab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true" onclick="loadAppDetails()">Home</a>
                    </li>
                    <li class="nav-item" id="plant_details">
                        <a class="nav-link" id="import-profile-tab" data-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false" onclick="loadDetails()">Import Details</a>
                    </li>
                    <li class="nav-item" id="agro_details" style="display:none">
                        <a class="nav-link" id="agro-profile-tab" data-toggle="pill" href="#agro-details" role="tab" aria-controls="pills-profile" aria-selected="false" onclick="load_details()">Import Details</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="pills-import-file" data-toggle="pill" href="#file-attachment" role="tab" aria-controls="pills-profile" aria-selected="false" onclick="load_attachment()">Attach File</a>
                    </li>
                </ul>
            </div>
            <div class="tab-content mt-2 mb-3" id="pills-tabContent">
                <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                    <div class="row">
                        <div class="col-sm-3">
                            <label class="form-label">Import Type <font color="red">*</font></label>
                        </div>
                        <div class="col-sm-8 justify-content-center">
                            <label class="custom-control custom-radio">
                                <input type="radio" class="custom-control-input" name="Import_Type" id="plantRadio" value="P" checked>
                                <span class="custom-control-indicator"></span>
                                <span class="custom-control-description">Plant And Plant Products</span>
                            </label>
                            <label class="custom-control custom-radio">
                                <input type="radio" class="custom-control-input" name="Import_Type" id="agroRadio" value="A">
                                <span class="custom-control-indicator"></span>
                                <span class="custom-control-description">Agrochemicals</span>
                            </label>
                        </div>
                        <div class="alert alert-danger" id="Import_TypeErrorMsg" style="display:none"></div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-sm-3">
                            <label class="form-label">Application Type <font color="red">*</font></label>
                        </div>
                        <div class="col-sm-8 justify-content-center">
                            <label class="custom-control custom-radio">
                                <input type="radio" name="Application_Type" class="custom-control-input" value="Personal" onclick="change_selection(this.value)">
                                <span class="custom-control-indicator"></span>
                                <span class="custom-control-description">Personal</span>
                            </label>
                            <label class="custom-control custom-radio">
                                <input type="radio" name="Application_Type" class="custom-control-input" value="Commercial" onclick="change_selection(this.value)">
                                <span class="custom-control-indicator"></span>
                                <span class="custom-control-description">Commercial</span>
                            </label>
                            <div class="alert alert-danger" id="Application_TypeErrorMsg" style="display:none"></div>
                        </div>
                    </div>
                    <br>
                    <div class="row nationality-div" style="display:none">
                        <div class="col-sm-3">
                            <label class="form-label">Nationality <font color="red">*</font></label>
                        </div>
                        <div class="col-sm-8 justify-content-center">
                            <label class="custom-control custom-radio">
                                <input type="radio" name="Nationality_Type" class="custom-control-input" id="bhutanese_radio" value="Bhutanese" onclick="checkNationality(this.value)">
                                <span class="custom-control-indicator"></span>
                                <span class="custom-control-description">Bhutanese</span>
                            </label>
                            <label class="custom-control custom-radio">
                                <input type="radio" name="Nationality_Type" class="custom-control-input" id="non_bhutanese_radio" value="Non-Bhutanese" onclick="checkNationality(this.value)">
                                <span class="custom-control-indicator"></span>
                                <span class="custom-control-description">Non-Bhutanese</span>
                            </label>
                            <div class="alert alert-danger" id="Nationality_ErrorMsg" style="display:none"></div>
                        </div>
                    </div>
                    <br>
                    <div id="commercial_div" style="display:none;">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">License Number <font color="red">*</font></label>
                                    <input type="text" class="form-control" id="regNo" name="regNo">
                                </div>
                                <div class="alert alert-danger" id="regNoErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Business Name <font color="red">*</font></label>
                                    <input type="text" class="form-control" id="business_name" name="p_businessName">
                                </div>
                                <div class="alert alert-danger" id="business_nameErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Present Address <font color="red">*</font></label>
                                    <textarea class="form-control" rows="2" id="commercial_presentAddress" name="commercial_presentAddress"></textarea>
                                </div>
                                <div class="alert alert-danger" id="commercial_presentAddressErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Contact Number <font color="red">*</font></label>
                                    <input type="number" class="form-control" id="com_contactNumber" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"  name="com_contactNumber" maxlength="8" onkeypress="return isNumberKey(event)" onchange="checkComContact(this.value)">
                                </div>
                                <div class="alert alert-danger" id="com_contactNumberErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Email <font color="red">*</font></label>
                                    <input type="email" class="form-control" id="com_email" name="com_email" onchange="validatecomemailId(this.value)">
                                </div>
                                <div class="alert alert-danger" id="com_emailErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Name And Address Supplier <font color="red">*</font></label>
                                    <textarea class="form-control" rows="2" id="com_supplier" name="com_supplier"></textarea>
                                </div>
                                <div class="alert alert-danger" id="com_supplierErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Country Of Origin <font color="red">*</font></label>
                                     <select class="form-control" name="Com_Country_Of_Origin"  id="Com_Country_Of_Origin">
                                        <option value="">--SELECT--</option>
                                        {% for country in country %}
                                            <option value="{{ country.Country_Name }}">{{ country.Country_Name }}</option>
                                        {% endfor %}
                                     </select>
                                    <div class="alert alert-danger" id="Com_Country_Of_OriginErrorMsg" style="display:none"></div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Means of Conveyance <font color="red">*</font></label>
                                    <select class="form-control form-control" id="com_conveyanceMeans" name="com_conveyanceMeans">
                                        <option value="">-SELECT-</option>
                                        <option value="Air">Air</option>
                                        <option value="Vehicular">Vehicular</option>
                                    </select>
                                </div>
                                <div class="alert alert-danger" id="com_conveyanceMeansErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Place Of Entry <font color="red">*</font></label>
                                     <select class="form-control" name="com_entry_point"  id="com_entry_point">
                                        <option value="">--SELECT--</option>
                                        {% for location in location %}
                                            <option value="{{ location.Field_Office_Id }}">{{ location.Field_Office }}</option>
                                        {% endfor %}
                                     </select>
                                </div>
                                <div class="alert alert-danger" id="com_entry_pointErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Purpose <font color="red">*</font></label>
                                    <textarea class="form-control" rows="2" id="movementPurpose" name="com_movementPurpose"></textarea>
                                </div>
                                <div class="alert alert-danger" id="movementPurposeErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Final Destination <font color="red">*</font></label>
                                    <input type="text" class="form-control" id="finalDestination" name="com_final_Destination">
                                </div>
                                <div class="alert alert-danger" id="finalDestinationErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Expected Arrival Date <font color="red">*</font></label>
                                    <input type="text" class="form-control date-picker flatpickr-input active" id="expectedDate" name="com_expected_arrival_date"  placeholder="Pick a date" readonly="readonly">
                                </div>
                                <div class="alert alert-danger" id="dateErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <div class="col-md-4 justify-content-center">
                            <div class="form-group">
                                <label class="form-label">Products are derived from GMO? <font color="red">*</font></label><br>
                                <label class="custom-control custom-radio">
                                    <input type="radio" class="custom-control-input" name="COM_GMO" value="Yes" onclick="GMO_Check(this.value)">
                                    <span class="custom-control-indicator"></span>
                                    <span class="custom-control-description">Yes</span>
                                </label>
                                <label class="custom-control custom-radio">
                                    <input type="radio" class="custom-control-input" name="COM_GMO" value="No" onclick="GMO_Check(this.value)">
                                    <span class="custom-control-indicator"></span>
                                    <span class="custom-control-description">No</span>
                                </label>
                            </div>
                            <div class="alert alert-danger" id="COM_GMOErrorMsg" style="display:none"></div>
                        </div>
                    </div>
                    <div id="bhutanese_div" style="display:none;">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Applicant CID <font color="red">*</font></label>
                                    <input type="number" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" class="form-control" id="cid" name="p_cid_number" maxlength="11" onkeypress="return isNumberKey(event)" onchange="getCitizenDetails(this.value)">
                                </div>
                                <div class="alert alert-danger" id="cidErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Applicant Name <font color="red">*</font></label>
                                    <input type="text" class="form-control" id="name" name="name" readonly="readonly">
                                </div>
                                <div class="alert alert-danger" id="nameErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Dzongkhag &nbsp;<font color='red'>*</font></label>
                                     <input type="text" class="form-control" name="dzongkhag"  id="dzongkhag" disabled>
                                </div>
                                <div class="alert alert-danger" id="dzongkhagErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Gewog &nbsp;<font color='red'>*</font></label>
                                    <input type="text" class="form-control" name="gewog" id="gewog" disabled>
                                </div>
                                <div class="alert alert-danger" id="gewogErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Village &nbsp;<font color='red'>*</font></label>
                                    <input type="text" class="form-control" name="village" id="village" disabled>
                                </div>
                                <div class="alert alert-danger" id="villageErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Contact Number <font color="red">*</font></label>
                                    <input type="number" class="form-control" id="contactNumber" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"  name="contactNumber" maxlength="8" onkeypress="return isNumberKey(event)" onchange="checkContact(this.value)">
                                </div>
                                <div class="alert alert-danger" id="contactNumberErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Email <font color="red">*</font></label>
                                    <input type="email" class="form-control" id="email" name="email" onchange="validateemailId(this.value)">
                                </div>
                                <div class="alert alert-danger" id="emailErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Name And Address Supplier <font color="red">*</font></label>
                                    <textarea class="form-control" rows="2" id="supplier" name="supplier"></textarea>
                                </div>
                                <div class="alert alert-danger" id="supplierErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Country Of Origin <font color="red">*</font></label>
                                     <select class="form-control" name="Country_Of_Origin"  id="Country_Of_Origin">
                                        <option value="">--SELECT--</option>
                                        {% for country in country %}
                                            <option value="{{ country.Country_Name }}">{{ country.Country_Name }}</option>
                                        {% endfor %}
                                     </select>
                                    <div class="alert alert-danger" id="Country_Of_OriginErrorMsg" style="display:none"></div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Means of Conveyance <font color="red">*</font></label>
                                    <select class="form-control form-control" id="conveyanceMeans" name="conveyanceMeans">
                                        <option value="">-SELECT-</option>
                                        <option value="Air">Air</option>
                                        <option value="Vehicular">Vehicular</option>
                                    </select>
                                </div>
                                <div class="alert alert-danger" id="conveyanceMeansErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Place Of Entry <font color="red">*</font></label>
                                     <select class="form-control" name="entry_point"  id="entry_point">
                                        <option value="">--SELECT--</option>
                                        {% for location in location %}
                                            <option value="{{ location.Field_Office_Id }}">{{ location.Field_Office }}</option>
                                        {% endfor %}
                                     </select>
                                </div>
                                <div class="alert alert-danger" id="entry_pointErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Purpose <font color="red">*</font></label>
                                    <textarea class="form-control" rows="2" id="B_movementPurpose" name="B_movementPurpose"></textarea>
                                </div>
                                <div class="alert alert-danger" id="B_movementPurposeErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Final Destination <font color="red">*</font></label>
                                    <input type="text" class="form-control" id="B_finalDestination" name="B_final_Destination">
                                </div>
                                <div class="alert alert-danger" id="B_final_DestinationErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Expected Arrival Date <font color="red">*</font></label>
                                    <input type="text" class="form-control date-picker flatpickr-input active" id="B_expectedDate" name="date_expected"  placeholder="Pick a date" readonly="readonly">
                                </div>
                                <div class="alert alert-danger" id="B_expectedDateErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4 justify-content-center">
                                <div class="form-group">
                                    <label class="form-label">Products are derived from GMO? <font color="red">*</font></label><br>
                                    <label class="custom-control custom-radio">
                                        <input type="radio" class="custom-control-input" name="GMO" value="Yes" onclick="GMO_Check(this.value)">
                                        <span class="custom-control-indicator"></span>
                                        <span class="custom-control-description">Yes</span>
                                    </label>
                                    <label class="custom-control custom-radio">
                                        <input type="radio" class="custom-control-input" name="GMO" value="No" onclick="GMO_Check(this.value)">
                                        <span class="custom-control-indicator"></span>
                                        <span class="custom-control-description">No</span>
                                    </label>
                                </div>
                                <div class="alert alert-danger" id="GMOErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                    </div>
                    <div id="non_bhutanese_div" style="display:none;">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Passport No <font color="red">*</font></label>
                                    <input type="text" class="form-control" id="passport" name="passport">
                                </div>
                                <div class="alert alert-danger" id="passportErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Nationality <font color="red">*</font></label>
                                    <input type="text" class="form-control" id="nationality" name="nationality">
                                </div>
                                <div class="alert alert-danger" id="nationalityErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Email <font color="red">*</font></label>
                                    <input type="email" class="form-control" id="p_email" name="p_email" onchange="validatePassemailId(this.value)">
                                </div>
                                <div class="alert alert-danger" id="p_emailErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Name <font color="red">*</font></label>
                                    <input type="text" class="form-control" id="passport_name" name="passport_name">
                                </div>
                                <div class="alert alert-danger" id="passport_nameErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Address <font color="red">*</font></label>
                                    <textarea class="form-control" id="Address" name="Address"></textarea>
                                </div>
                                <div class="alert alert-danger" id="AddressErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Contact Number <font color="red">*</font></label>
                                    <input type="number" class="form-control" id="p_contactNumber" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"  name="p_contactNumber" maxlength="8" onkeypress="return isNumberKey(event)" onchange="checkNonContact(this.value)">
                                </div>
                                <div class="alert alert-danger" id="p_contactNumberErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Name And Address Supplier <font color="red">*</font></label>
                                    <textarea class="form-control" rows="2" id="name_supplier" name="name_supplier"></textarea>
                                </div>
                                <div class="alert alert-danger" id="name_supplierErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Country Of Origin <font color="red">*</font></label>
                                     <select class="form-control" name="Origin" id="Origin">
                                        <option value="">--SELECT--</option>
                                        {% for country in country %}
                                            <option value="{{ country.Country_Name }}">{{ country.Country_Name }}</option>
                                        {% endfor %}
                                     </select>
                                    <div class="alert alert-danger" id="OriginErrorMsg" style="display:none"></div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Means of Conveyance <font color="red">*</font></label>
                                    <select class="form-control form-control" id="p_conveyanceMeans" name="p_conveyanceMeans">
                                        <option value="">-SELECT-</option>
                                        <option value="Air">Air</option>
                                        <option value="Vehicular">Vehicular</option>
                                    </select>
                                </div>
                                <div class="alert alert-danger" id="p_conveyanceMeansErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Place Of Entry <font color="red">*</font></label>
                                     <select class="form-control" name="p_entry_point"  id="p_entry_point">
                                        <option value="">--SELECT--</option>
                                        {% for location in location %}
                                            <option value="{{ location.Field_Office_Id }}">{{ location.Field_Office }}</option>
                                        {% endfor %}
                                     </select>
                                </div>
                                <div class="alert alert-danger" id="p_entry_pointErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Purpose <font color="red">*</font></label>
                                    <textarea class="form-control" rows="2" id="p_movementPurpose" name="p_movementPurpose"></textarea>
                                </div>
                                <div class="alert alert-danger" id="p_movementPurposeErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Final Destination <font color="red">*</font></label>
                                    <input type="text" class="form-control" id="p_finalDestination" name="p_finalDestination">
                                </div>
                                <div class="alert alert-danger" id="p_finalDestinationErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-label">Expected Arrival Date <font color="red">*</font></label>
                                    <input type="text" class="form-control date-picker flatpickr-input active" id="p_expectedDate" name="p_expectedDate"  placeholder="Pick a date" readonly="readonly">
                                </div>
                                <div class="alert alert-danger" id="p_expectedDateErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-sm-6 justify-content-center">
                                <div class="form-group">
                                    <label class="form-label">Products are derived from GMO? <font color="red">*</font></label><br>
                                    <label class="custom-control custom-radio">
                                        <input type="radio" class="custom-control-input" name="P_GMO" value="Yes" onclick="GMO_Check(this.value)">
                                        <span class="custom-control-indicator"></span>
                                        <span class="custom-control-description">Yes</span>
                                    </label>
                                    <label class="custom-control custom-radio">
                                        <input type="radio" class="custom-control-input" name="P_GMO" value="No" onclick="GMO_Check(this.value)">
                                        <span class="custom-control-indicator"></span>
                                        <span class="custom-control-description">No</span>
                                    </label>
                                </div>
                                <div class="alert alert-danger" id="P_GMODateErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                    </div>
                    <div class="card-action" style="display:none">
                        <button type="button" class="btn btn-primary" id="save_details_button" onclick="import_save()">Save</button>
                    </div>
                </div>
                <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="import-profile-tab">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-head-row">
                                <div class="card-tools pull-right">
                                    <button type="button" class="btn btn-light" onclick="show_plant_modal()">Add</button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div id="Details">
                                {% include 'import_permit/import_page_plant.html' %}
                            </div>
                        </div>
                        <div class="card-action">
                            <button type="button" class="btn btn-success" onclick="plant_import_save()">Save</button>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="agro-details" role="tabpanel" aria-labelledby="import-profile-tab">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-head-row">
                                <div class="card-tools pull-right">
                                    <button type="button" class="btn btn-light" onclick="show_agro_modal()">Add</button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div id="AgroDetails">
                                {% include 'import_permit/import_page_agro.html' %}
                            </div>
                        </div>
                        <div class="card-action">
                            <button type="button" class="btn btn-success" onclick="agro_import_save()">Save</button>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="file-attachment" role="tabpanel" aria-labelledby="pills-import-file">
                    <div id="fileAttachPlant">
                        {% include 'import_permit/plant_attachment_page.html' %}
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<form method="post" id="save_plant_form">
    {% csrf_token %}
    <input type="hidden" name="appNo" id="plant_applicationNo">
    <div class="modal fade" id="add_plant_details" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Add Details</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="col-lg-12">
                        <div class="box box-primary">
                            <div class="box-body">
                                <input type="text" name="importType" value="P" style="display:none"/>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="form-label">Import Category <font color="red">*</font> </label>
                                            <select class="form-control form-control" id="plant_import_category" name="plant_import_category">
                                                <option value="">-SELECT-</option>
                                                <option value="Seed">Seed</option>
                                                <option value="Plant">Plant</option>
                                                <option value="Plant Products">Plant Products</option>
                                            </select>
                                        </div>
                                        <div class="alert alert-danger" id="plant_import_categoryErrorMsg" style="display:none"></div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="form-label">Crop <font color="red">*</font></label>
                                            <select class="form-control" name="crop_id"  id="crop_id" onchange="getVariety(this.value)">
                                                <option value="">--SELECT--</option>
                                                {% for crop in crop %}
                                                        <option value="{{ crop.Crop_Id }}">{{ crop.Crop_Common_Name }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                        <div class="alert alert-danger" id="crop_idErrorMsg" style="display:none"></div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="form-label">Crop Variety <font color="red">*</font></label>
                                            <select class="form-control" name="crop_variety_id"  id="crop_variety">
                                                <option value="">--SELECT--</option>
                                                {% for variety in variety %}
                                                        <option value="{{ variety.Crop_Variety_Id }}">{{ variety.Crop_Variety_Name }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                        <div class="alert alert-danger" id="crop_varietyErrorMsg" style="display:none"></div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="form-group col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">Quantity <font color="red">*</font></label>
                                            <input type="text" class="form-control" id="qty" name="qty" onkeypress="return isNumberKey(event)">
                                        </div>
                                        <div class="alert alert-danger" id="qtyErrorMsg" style="display:none"></div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-label">Unit <font color="red">*</font></label>
                                            <select class="form-control" name="unit"  id="unit">
                                                <option value="">--SELECT--</option>
                                                {% for unit in unit %}
                                                    <option value="{{ unit.Unit }}">{{ unit.Unit }}</option>
                                                {% endfor %}
                                             </select>
                                        </div>
                                        <div class="alert alert-danger" id="unitErrorMsg" style="display:none"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="save_details_plant()">Add</button>
            </div>
            </div>
        </div>
    </div>
</form>
<form method="post" id="save_agro_form">
    {% csrf_token %}
    <input type="hidden" name="agro_applicationNo" id="agro_applicationNo">
    <div class="modal fade" id="add_agro_details" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                 <div class="modal-header">
                        <h5 class="modal-title">Add Details</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                        </button>
                </div>
                <div class="modal-body">
                    <div class="col-lg-12">
                        <div class="box box-primary">
                            <div class="box-body">
                                <input type="text" name="importType" value="A" style="display:none"/>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="form-label">Import Category <font color="red">*</font></label>
                                            <select class="form-control form-control" id="agro_import_category" name="agro_import_category">
                                                <option value="">-SELECT-</option>
                                                <option value="Seed">Pesticides</option>
                                                <option value="Plant">Bio-Pesticides</option>
                                                <option value="Plant Products">Plant Products</option>
                                            </select>
                                        </div>
                                        <div class="alert alert-danger" id="agro_import_categoryErrorMsg" style="display:none"></div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="form-label">Pesticide <font color="red">*</font></label>
                                            <select class="form-control" name="pesticide_id"  id="pesticide_id">
                                                <option value="">--SELECT--</option>
                                                {% for pesticide in pesticide %}
                                                        <option value="{{ pesticide.Pesticide_Id }}">{{ pesticide.Pesticide_Name }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                        <div class="alert alert-danger" id="pesticide_idErrorMsg" style="display:none"></div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="form-label">Description <font color="red">*</font></label>
                                            <textarea class="form-control" rows="5" id="description" name="description"></textarea>
                                        </div>
                                        <div class="alert alert-danger" id="descriptionErrorMsg" style="display:none"></div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="form-label">Quantity <font color="red">*</font></label>
                                            <input type="text" class="form-control" id="agro_qty" name="agro_qty" onkeypress="return isNumberKey(event)">
                                        </div>
                                        <div class="alert alert-danger" id="agro_qtyErrorMsg" style="display:none"></div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="form-label">Unit <font color="red">*</font></label>
                                            <select class="form-control" name="agro_unit"  id="agro_unit">
                                                <option value="">--SELECT--</option>
                                                {% for unit in unit %}
                                                    <option value="{{ unit.Unit }}">{{ unit.Unit }}</option>
                                                {% endfor %}
                                             </select>
                                        </div>
                                        <div class="alert alert-danger" id="agro_unitErrorMsg" style="display:none"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" onclick="save_details_agro()">Add</button>
                </div>
            </div>
        </div>
    </div>
</form>

<form method="post" id="plant_attachment_form" enctype="multipart/form-data">
    {% csrf_token %}
    <input type="text" id="plant_attachment_applicationNo" name="appNo" value="{{ applNo }}" style="display:none">
    <div class="modal fade" id="plant_attachmentModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                 <div class="modal-header">
                    <h5 class="modal-title" id="plant_attachmentModalLabel">Attach Files</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="col-lg-12">
                        <div class="box box-primary">
                            <div class="box-body">
                                <div class="row">
                                    <div class="form-group col-md-6">
                                        <label class="form-label">Attach File</label>
                                        <input type="file" name="plant_document" id="plant_document">
                                        <div class="alert alert-danger" id="plant_documentErrorMsg" style="display:none"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary btn-lg pull-right" onclick="save_plant_attachment()"> Submit </button>
                </div>
            </div>
        </div>
    </div>
</form>

<form method="post" id="agro_attachment_form" enctype="multipart/form-data">
    {% csrf_token %}
    <input type="text" id="agro_attachment_applicationNo" name="appNo" value="{{ applNo }}" style="display:none">
    <div class="modal fade" id="agro_attachmentModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                 <div class="modal-header">
                    <h5 class="modal-title" id="agro_attachmentModalLabel">Attach Files</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="col-lg-12">
                        <div class="box box-primary">
                            <div class="box-body">
                                <div class="row">
                                    <div class="form-group col-md-6">
                                        <label class="form-label">Attach File</label>
                                        <input type="file" name="agro_document" id="agro_document">
                                        <div class="alert alert-danger" id="agro_documentErrorMsg" style="display:none"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary btn-lg pull-right" onclick="save_agro_attachment()"> Submit </button>
                </div>
            </div>
        </div>
    </div>
</form>
<script>
    function isNumberKey(evt)
      {
         var charCode = (evt.which) ? evt.which : event.keyCode
         if (charCode > 31 && (charCode < 48 || charCode > 57))
            return false;

         return true;
      }

    function change_selection(importType)
    {
        if(importType == "Personal")
        {
            $('.nationality-div').show();
            $('#commercial_div').hide();
            $('.card-action').hide();
        }
        else
        {
            $('.nationality-div').hide();
            $('#commercial_div').show();
            $('#bhutanese_div').hide();
            $('#non_bhutanese_div').hide();
            $("#bhutanese_radio").prop("checked", false);
            $("#non_bhutanese_radio").prop("checked", false);
            $('.card-action').show();
        }
    }
    function checkNationality(value)
    {
        if(value == "Bhutanese")
        {
           $('#bhutanese_div').show();
           $('#non_bhutanese_div').hide();
           $('.card-action').show();
        }
        else
        {
            $('#bhutanese_div').hide();
            $('#non_bhutanese_div').show();
            $('.card-action').show();
        }
    }
    function GMO_Check(value)
    {
        if(value=="Yes")
        {
            $('#save_details_button').hide();
        }
        else
        {
            $('#save_details_button').show();
        }
    }

    function import_save()
    {
        var Import_Type = $("input[name=Import_Type]:checked").length;
        var Application_Type = $("input[name=Application_Type]:checked").length;
        var Nationality = $("input[name=Nationality_Type]:checked").length;
        var app_type = $('input[name="Application_Type"]:checked').val();
        var nationality_type = $('input[name="Nationality_Type"]:checked').val();
        var GMO = $("input[name=GMO]:checked").length;
        var regNo = $('#regNo').val();
        var business_name = $('#business_name').val();
        var commercial_presentAddress = $('#commercial_presentAddress').val();
        var com_contactNumber = $('#com_contactNumber').val();
        var com_email = $('#com_email').val();
        var com_supplier = $('#com_supplier').val();
        var Com_Country_Of_Origin = $('#Com_Country_Of_Origin').val();
        var com_conveyanceMeans = $('#com_conveyanceMeans').val();
        var com_entry_point = $('#com_entry_point').val();
        var movementPurpose = $('#movementPurpose').val();
        var finalDestination = $('#finalDestination').val();
        var expectedDate = $('#expectedDate').val();

        var cid = $('#cid').val();
        var contactNumber = $('#contactNumber').val();
        var email = $('#email').val();
        var supplier = $('#supplier').val();
        var Country_Of_Origin = $('#Country_Of_Origin').val();
        var conveyanceMeans = $('#conveyanceMeans').val();
        var entry_point = $('#entry_point').val();
        var B_movementPurpose = $('#B_movementPurpose').val();
        var B_finalDestination = $('#B_finalDestination').val();
        var B_expectedDate = $('#B_expectedDate').val();

        var passport = $('#passport').val();
        var nationality = $('#nationality').val();
        var passport_name = $('#passport_name').val();
        var Address = $('#Address').val();
        var p_contactNumber = $('#p_contactNumber').val();
        var p_email = $('#p_email').val();
        var name_supplier = $('#name_supplier').val();
        var Origin = $('#Origin').val();
        var p_conveyanceMeans = $('#p_conveyanceMeans').val();
        var p_entry_point = $('#p_entry_point').val();
        var p_movementPurpose = $('#p_movementPurpose').val();
        var p_finalDestination = $('#p_finalDestination').val();
        var p_expectedDate = $('#p_expectedDate').val();
        var P_GMO = $("input[name=P_GMO]:checked").length;
        var cid_Count = $('#cid').val().length;
        var number_count = $('#contactNumber').val().length;
        var com_number_count = $('#com_contactNumber').val().length;
        var p_number_count = $('#p_contactNumber').val().length;
        var Import_Type = $("input[name=Import_Type]:checked").length;
        var Application_Type = $("input[name=Application_Type]:checked").length;
        var Nationality = $("input[name=Nationality]:checked").length;
        var COM_GMO = $("input[name=COM_GMO]:checked").length;

        if(Import_Type < 1)
        {
            $('#Import_TypeErrorMsg').html("Please Check One Import Type.");
            $('#Import_TypeErrorMsg').show();
            $('#Import_TypeErrorMsg').delay(2000).fadeOut('slow');
        }
        else if(Application_Type < 1)
        {
            $('#Application_TypeErrorMsg').html("Please Check One Application Type.");
            $('#Application_TypeErrorMsg').show();
            $('#Application_TypeErrorMsg').delay(2000).fadeOut('slow');
        }

        else if(app_type == "Commercial" && regNo == "")
        {
            $('#regNoErrorMsg').html("Enter License Number.");
            $('#regNoErrorMsg').show();
            $('#regNoErrorMsg').delay(2000).fadeOut('slow');
            $('#regNo').focus();
        }
        else if(app_type == "Commercial" && business_name == "")
        {
            $('#business_nameErrorMsg').html("Enter Business Name.");
            $('#business_nameErrorMsg').show();
            $('#business_nameErrorMsg').delay(2000).fadeOut('slow');
            $('#business_name').focus();
        }
        else if(app_type == "Commercial" && commercial_presentAddress == "")
        {
            $('#commercial_presentAddressErrorMsg').html("Enter Present Address.");
            $('#commercial_presentAddressErrorMsg').show();
            $('#commercial_presentAddressErrorMsg').delay(2000).fadeOut('slow');
            $('#commercial_presentAddress').focus();
        }
        else if(app_type == "Commercial" && com_contactNumber == "")
        {
            $('#com_contactNumberErrorMsg').html("Enter Contact Number.");
            $('#com_contactNumberErrorMsg').show();
            $('#com_contactNumberErrorMsg').delay(2000).fadeOut('slow');
            $('#com_contactNumber').focus();
        }
        else if(app_type == "Commercial" && com_number_count < 8)
        {
            $('#com_contactNumberErrorMsg').html("Cannot Be Less Than Eight.");
            $('#com_contactNumberErrorMsg').show();
            $('#com_contactNumberErrorMsg').delay(2000).fadeOut('slow');
            $('#com_contactNumber').focus();
        }
        else if(app_type == "Commercial" && com_email == "")
        {
            $('#com_emailErrorMsg').html("Enter Email.");
            $('#com_emailErrorMsg').show();
            $('#com_emailErrorMsg').delay(2000).fadeOut('slow');
            $('#com_email').focus();
        }
        else if(app_type == "Commercial" && com_supplier == "")
        {
            $('#com_supplierErrorMsg').html("Enter Name And Address Of Supplier.");
            $('#com_supplierErrorMsg').show();
            $('#com_supplierErrorMsg').delay(2000).fadeOut('slow');
            $('#com_supplier').focus();
        }
        else if(app_type == "Commercial" && Com_Country_Of_Origin == "")
        {
            $('#Com_Country_Of_OriginErrorMsg').html("Select Country oF Origin.");
            $('#Com_Country_Of_OriginErrorMsg').show();
            $('#Com_Country_Of_OriginErrorMsg').delay(2000).fadeOut('slow');
            $('#Com_Country_Of_Origin').focus();
        }
        else if(app_type == "Commercial" && com_conveyanceMeans == "")
        {
            $('#com_conveyanceMeansErrorMsg').html("Select Means of Conveyance.");
            $('#com_conveyanceMeansErrorMsg').show();
            $('#com_conveyanceMeansErrorMsg').delay(2000).fadeOut('slow');
            $('#com_conveyanceMeans').focus();
        }
        else if(app_type == "Commercial" && com_entry_point == "")
        {
            $('#com_entry_pointErrorMsg').html("Select Place Of Entry.");
            $('#com_entry_pointErrorMsg').show();
            $('#com_entry_pointErrorMsg').delay(2000).fadeOut('slow');
            $('#com_entry_point').focus();
        }
        else if(app_type == "Commercial" && movementPurpose == "")
        {
            $('#movementPurposeErrorMsg').html("Enter Purpose.");
            $('#movementPurposeErrorMsg').show();
            $('#movementPurposeErrorMsg').delay(2000).fadeOut('slow');
            $('#movementPurpose').focus();
        }
        else if(app_type == "Commercial" && finalDestination == "")
        {
            $('#finalDestinationErrorMsg').html("Enter Final Destination.");
            $('#finalDestinationErrorMsg').show();
            $('#finalDestinationErrorMsg').delay(2000).fadeOut('slow');
            $('#finalDestination').focus();
        }
        else if(app_type == "Commercial" && expectedDate == "")
        {
            $('#dateErrorMsg').html("Select Expected Arrival Date.");
            $('#dateErrorMsg').show();
            $('#dateErrorMsg').delay(2000).fadeOut('slow');
            $('#expectedDate').focus();
        }
        else if(app_type == "Commercial" && COM_GMO < 1)
        {
            $('#COM_GMOErrorMsg').html("Select One.");
            $('#COM_GMOErrorMsg').show();
            $('#COM_GMOErrorMsg').delay(2000).fadeOut('slow');
            $("input[name=COM_GMO]").focus();
        }
        else if(app_type == "Personal" && nationality_type == "Bhutanese" && cid == "")
        {
            $('#cidErrorMsg').html("Enter CID.");
            $('#cidErrorMsg').show();
            $('#cidErrorMsg').delay(2000).fadeOut('slow');
            $('#cid').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Bhutanese" && cid_Count < 11)
        {
            $('#cidErrorMsg').html("Cannot Be Less Than Eleven.");
            $('#cidErrorMsg').show();
            $('#cidErrorMsg').delay(2000).fadeOut('slow');
            $('#cid').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Bhutanese" && contactNumber == "")
        {
            $('#contactNumberErrorMsg').html("Enter Contact Number.");
            $('#contactNumberErrorMsg').show();
            $('#contactNumberErrorMsg').delay(2000).fadeOut('slow');
            $('#contactNumber').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Bhutanese" && number_count < 8)
        {
            $('#contactNumberErrorMsg').html("Cannot Be Less Than Eight.");
            $('#contactNumberErrorMsg').show();
            $('#contactNumberErrorMsg').delay(2000).fadeOut('slow');
            $('#contactNumber').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Bhutanese"  && email == "")
        {
            $('#emailErrorMsg').html("Enter Email.");
            $('#emailErrorMsg').show();
            $('#emailErrorMsg').delay(2000).fadeOut('slow');
            $('#email').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Bhutanese" && supplier == "")
        {
            $('#supplierErrorMsg').html("Enter Name And Address Of Supplier.");
            $('#supplierErrorMsg').show();
            $('#supplierErrorMsg').delay(2000).fadeOut('slow');
            $('#supplier').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Bhutanese" && Country_Of_Origin == "")
        {
            $('#Country_Of_OriginErrorMsg').html("Select Country oF Origin.");
            $('#Country_Of_OriginErrorMsg').show();
            $('#Country_Of_OriginErrorMsg').delay(2000).fadeOut('slow');
            $('#Country_Of_OriginErrorMsg').focus();
        }
        else if(app_type == "Personal"  && nationality_type == "Bhutanese" && conveyanceMeans == "")
        {
            $('#conveyanceMeansErrorMsg').html("Select Means of Conveyance.");
            $('#conveyanceMeansErrorMsg').show();
            $('#conveyanceMeansErrorMsg').delay(2000).fadeOut('slow');
            $('#conveyanceMeans').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Bhutanese" && entry_point == "")
        {
            $('#entry_pointErrorMsg').html("Select Place Of Entry.");
            $('#entry_pointErrorMsg').show();
            $('#entry_pointErrorMsg').delay(2000).fadeOut('slow');
            $('#entry_point').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Bhutanese" && B_movementPurpose == "")
        {
            $('#B_movementPurposeErrorMsg').html("Enter Purpose.");
            $('#B_movementPurposeErrorMsg').show();
            $('#B_movementPurposeErrorMsg').delay(2000).fadeOut('slow');
            $('#B_movementPurpose').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Bhutanese" && B_finalDestination == "")
        {
            $('#B_final_DestinationErrorMsg').html("Enter Final Destination.");
            $('#B_final_DestinationErrorMsg').show();
            $('#B_final_DestinationErrorMsg').delay(2000).fadeOut('slow');
            $('#B_finalDestination').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Bhutanese" && B_expectedDate == "")
        {
            $('#B_expectedDateErrorMsg').html("Select Expected Arrival Date.");
            $('#B_expectedDateErrorMsg').show();
            $('#B_expectedDateErrorMsg').delay(2000).fadeOut('slow');
            $('#B_expectedDate').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Bhutanese" && GMO < 1)
        {
            $('#GMOErrorMsg').html("Select One.");
            $('#GMOErrorMsg').show();
            $('#GMOErrorMsg').delay(2000).fadeOut('slow');
            $("input[name=GMO]").focus();
        }
        else if(app_type == "Personal" && nationality_type == "Non-Bhutanese" && passport == "")
        {
            $('#passportErrorMsg').html("Enter Passport No.");
            $('#passportErrorMsg').show();
            $('#passportErrorMsg').delay(2000).fadeOut('slow');
            $('#passport').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Non-Bhutanese" && nationality == "")
        {
            $('#nationalityErrorMsg').html("Enter Nationality.");
            $('#nationalityErrorMsg').show();
            $('#nationalityErrorMsg').delay(2000).fadeOut('slow');
            $('#nationality').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Non-Bhutanese" && p_email == "")
        {
            $('#p_emailErrorMsg').html("Enter Email.");
            $('#p_emailErrorMsg').show();
            $('#p_emailErrorMsg').delay(2000).fadeOut('slow');
            $('#p_email').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Non-Bhutanese" && passport_name == "")
        {
            $('#passport_nameErrorMsg').html("Enter Name.");
            $('#passport_nameErrorMsg').show();
            $('#passport_nameErrorMsg').delay(2000).fadeOut('slow');
            $('#passport_name').focus();
        }

        else if(app_type == "Personal" && nationality_type == "Non-Bhutanese" && Address == "")
        {
            $('#AddressErrorMsg').html("Enter Address.");
            $('#AddressErrorMsg').show();
            $('#AddressErrorMsg').delay(2000).fadeOut('slow');
            $('#Address').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Non-Bhutanese" && p_contactNumber == "")
        {
            $('#p_contactNumberErrorMsg').html("Enter Contact Number.");
            $('#p_contactNumberErrorMsg').show();
            $('#p_contactNumberErrorMsg').delay(2000).fadeOut('slow');
            $('#p_contactNumber').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Non-Bhutanese" && p_number_count < 8)
        {
            $('#p_contactNumberErrorMsg').html("Cannot Be Less Than Eight.");
            $('#p_contactNumberErrorMsg').show();
            $('#p_contactNumberErrorMsg').delay(2000).fadeOut('slow');
            $('#p_contactNumber').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Non-Bhutanese" && name_supplier == "")
        {
            $('#name_supplierErrorMsg').html("Enter Name And Address Of Supplier.");
            $('#name_supplierErrorMsg').show();
            $('#name_supplierErrorMsg').delay(2000).fadeOut('slow');
            $('#name_supplier').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Non-Bhutanese" && Origin == "")
        {
            $('#OriginErrorMsg').html("Select Country oF Origin.");
            $('#OriginErrorMsg').show();
            $('#OriginErrorMsg').delay(2000).fadeOut('slow');
            $('#Origin').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Non-Bhutanese" && p_conveyanceMeans == "")
        {
            $('#p_conveyanceMeansErrorMsg').html("Select Means of Conveyance.");
            $('#p_conveyanceMeansErrorMsg').show();
            $('#p_conveyanceMeansErrorMsg').delay(2000).fadeOut('slow');
            $('#p_conveyanceMeans').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Non-Bhutanese" && p_entry_point == "")
        {
            $('#p_entry_pointErrorMsg').html("Select Place Of Entry.");
            $('#p_entry_pointErrorMsg').show();
            $('#p_entry_pointErrorMsg').delay(2000).fadeOut('slow');
            $('#p_entry_point').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Non-Bhutanese" && p_movementPurpose == "")
        {
            $('#p_movementPurposeErrorMsg').html("Enter Purpose.");
            $('#p_movementPurposeErrorMsg').show();
            $('#p_movementPurposeErrorMsg').delay(2000).fadeOut('slow');
            $('#p_movementPurpose').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Non-Bhutanese" && p_finalDestination == "")
        {
            $('#p_finalDestinationErrorMsg').html("Enter Final Destination.");
            $('#p_finalDestinationErrorMsg').show();
            $('#p_finalDestinationErrorMsg').delay(2000).fadeOut('slow');
            $('#p_finalDestination').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Non-Bhutanese" && p_expectedDate == "")
        {
            $('#p_expectedDateErrorMsg').html("Select Expected Arrival Date.");
            $('#p_expectedDateErrorMsg').show();
            $('#p_expectedDateErrorMsg').delay(2000).fadeOut('slow');
            $('#p_expectedDate').focus();
        }
        else if(app_type == "Personal" && nationality_type == "Non-Bhutanese" && P_GMO < 1)
        {
            $('#P_GMOErrorMsg').html("Select One.");
            $('#P_GMOErrorMsg').show();
            $('#P_GMOErrorMsg').delay(2000).fadeOut('slow');
             $("input[name=P_GMO]").focus();
        }

        else
        {
            $.ajax({
                type : "POST",
                url : "{% url 'save_import_permit' %}",
                data : $('#importForm').serialize(),
                success : function(data) {
                    $('#applicationNo').val(data.applNo);
                    $('#plant_applicationNo').val(data.applNo);
                    $('#agro_applicationNo').val(data.applNo);
                    if(data.importType == "P")
                    {
                        $('#import-profile-tab').tab('show');
                    }
                    else
                    {

                         $('#agro-profile-tab').tab('show');
                    }
                }
            });
        }
    }


    function show_plant_modal()
    {
        $('#add_plant_details').modal('show');
    }

    function show_agro_modal()
    {
        $('#add_agro_details').modal('show');
    }

    function show_plant_attachment_modal()
    {
        $('#plant_attachmentModal').modal('show');
    }


    function save_details_plant()
    {
            var plant_import_category = $('#plant_import_category').val();
            var crop_id = $('#crop_id').val();
            var crop_variety = $('#crop_variety').val();
            var unit = $('#unit').val();
            var qty = $('#qty').val();

            if(plant_import_category == "")
            {
                $('#plant_import_categoryErrorMsg').html("Select Import Category.");
                $('#plant_import_categoryErrorMsg').show();
                $('#plant_import_categoryErrorMsg').delay(2000).fadeOut('slow');
            }
            else if(crop_id == "")
            {
                $('#crop_idErrorMsg').html("Select Crop.");
                $('#crop_idErrorMsg').show();
                $('#crop_idErrorMsg').delay(2000).fadeOut('slow');
            }
            else if(crop_variety == "")
            {
                $('#crop_varietyErrorMsg').html("Select Crop Variety.");
                $('#crop_varietyErrorMsg').show();
                $('#crop_varietyErrorMsg').delay(2000).fadeOut('slow');
            }
            else if(unit == "")
            {
                $('#unitErrorMsg').html("Enter Unit.");
                $('#unitErrorMsg').show();
                $('#unitErrorMsg').delay(2000).fadeOut('slow');
            }
            else if(qty == "")
            {
                $('#qtyErrorMsg').html("Enter Quantity.");
                $('#qtyErrorMsg').show();
                $('#qtyErrorMsg').delay(2000).fadeOut('slow');
            }
            else
            {
                $.ajax({
                    type : "POST",
                    url : "{% url 'save_import_plant' %}",
                    data : $('#save_plant_form').serialize(),
                    success : function(responseText) {
                       $('#add_plant_details').modal('hide');
                       $('#Details').html(responseText);
                       $('#import-profile-tab').tab('show');
                       $('.modal-backdrop').remove();
                       $('#save_plant_form')[0].reset();
                    }
                });
            }
    }

    function save_details_agro()
    {
        var agro_import_category = $('#agro_import_category').val();
        var pesticide_id = $('#pesticide_id').val();
        var description = $('#description').val();
        var agro_unit = $('#agro_unit').val();
        var agro_qty = $('#agro_qty').val();

        if(agro_import_category == "")
            {
                $('#agro_import_categoryErrorMsg').html("Select Import Category.");
                $('#agro_import_categoryErrorMsg').show();
                $('#agro_import_categoryErrorMsg').delay(2000).fadeOut('slow');
            }
            else if(pesticide_id == "")
            {
                $('#pesticide_idErrorMsg').html("Select Pesticides.");
                $('#pesticide_idErrorMsg').show();
                $('#pesticide_idErrorMsg').delay(2000).fadeOut('slow');
            }
            else if(description == "")
            {
                $('#descriptionErrorMsg').html("Enter Description.");
                $('#descriptionErrorMsg').show();
                $('#descriptionErrorMsg').delay(2000).fadeOut('slow');
            }
            else if(agro_qty == "")
            {
                $('#agro_qtyErrorMsg').html("Enter Quantity.");
                $('#agro_qtyErrorMsg').show();
                $('#agro_qtyErrorMsg').delay(2000).fadeOut('slow');
            }
            else if(agro_unit == "")
            {
                $('#agro_unitErrorMsg').html("Enter Unit.");
                $('#agro_unitErrorMsg').show();
                $('#agro_unitErrorMsg').delay(2000).fadeOut('slow');
            }
            else
            {
                $.ajax({
                    type : "POST",
                    url : "{% url 'save_import_agro' %}",
                    data : $('#save_agro_form').serialize(),
                    success : function(responseText) {
                       $('#add_agro_details').modal('hide');
                       $('#AgroDetails').html(responseText);
                       $('#agro-profile-tab').tab('show');
                       $('.modal-backdrop').remove();
                       $('#save_agro_form')[0].reset();
                    }
                });
            }
    }

    function save_plant_attachment()
    {
        var fileName = document.getElementById('plant_document').files[0].name;
        var fd = new FormData();
        var file = document.getElementById('plant_document').files[0];
        fd.append('plant_document', file);
        token_value=$("input[name=csrfmiddlewaretoken]").val();
        $.ajaxSetup
        ({
            beforeSend: function(xhr, settings)
            {
                xhr.setRequestHeader("X-CSRFToken", token_value);
            }
        });
            $.ajax({
            type : "POST",
            url : "{% url 'add_plant_import_file' %}",
            data : fd,
            dataType: 'json',
            contentType: false,
            processData: false,
            success : function(data)
            {
                if (data.form_is_valid)
                {
                    var appNo = $('#applicationNo').val();
                    $.ajax
                    ({
                        type : "POST",
                        url : "{% url 'add_plant_attach' %}",
                        data : {'appNo':appNo , 'filename':fileName},
                        success : function(responseText)
                        {
                            $('#plant_attachmentModal').modal('hide');
                            $('#file-attachment').html(responseText);
                            $('.modal-backdrop').remove();
                            $('#plant_attachment_form')[0].reset();
                        }
                    });
                }else
                {
                    $('#plant_documentErrorMsg').html("File Already Exists With Same Name. Please Upload Another File");
                    $('#plant_documentErrorMsg').show();
                    $('#plant_documentErrorMsg').delay(2000).fadeOut('slow');
                }
            }
        });

    }

    function save_agro_attachment()
    {
        var fileName = document.getElementById('agro_document').files[0].name;
        var fd = new FormData();
        var file = document.getElementById('agro_document').files[0];
        fd.append('agro_document', file);
        token_value=$("input[name=csrfmiddlewaretoken]").val();
        $.ajaxSetup
        ({
            beforeSend: function(xhr, settings)
            {
                xhr.setRequestHeader("X-CSRFToken", token_value);
            }
        });
            $.ajax({
            type : "POST",
            url : "{% url 'add_agro_import_file' %}",
            data : fd,
            dataType: 'json',
            contentType: false,
            processData: false,
            success : function(data)
            {
                if (data.form_is_valid)
                {
                    var appNo = $('#applicationNo').val();
                    $.ajax
                    ({
                        type : "POST",
                        url : "{% url 'add_agro_attach' %}",
                        data : {'appNo':appNo , 'filename':fileName},
                        success : function(responseText)
                        {
                            $('#agro_attachmentModal').modal('hide');
                            $('#file-attachment').html(responseText);
                            $('.modal-backdrop').remove();
                            $('#agro_attachment_form')[0].reset();
                        }
                    });
                }else
                {
                    $('#agro_documentErrorMsg').html("File Already Exists With Same Name. Please Upload Another File");
                    $('#agro_documentErrorMsg').show();
                    $('#agro_documentErrorMsg').delay(2000).fadeOut('slow');
                }
            }
        });
    }

function getVariety(crop_id)
    {
        $.ajax({
            type : "GET",
            url : "{% url 'load_variety' %}",
            data :{'crop_id':crop_id},
            success : function(data)
            {
                $('#crop_variety').html(data);
            }
        });
    }
    function plant_import_save()
    {
        $('#pills-import-file').tab('show');
        $('#pills-profile').tabs().hide();
    }

    function agro_import_save()
    {
        $('#pills-import-file').tab('show');
        $('#agro-details').tabs().hide();
    }

function getCitizenDetails(cidNo)
{
    $.ajax({
        type : "GET",
        url : "{% url 'get_citizen_details' %}",
        data :{'cidNo':cidNo},
        success : function(data)
        {
            const myObj =data.response;
            var firstName = myObj.citizenDetailsResponse.citizenDetail[0].firstName
            var middleName = myObj.citizenDetailsResponse.citizenDetail[0].middleName
            var lastName = myObj.citizenDetailsResponse.citizenDetail[0].lastName
            if (middleName == null) {
                    middleName = "";
                }
            var CitizenName = firstName + " " + middleName + " " + lastName;
            var dzongkhagName = myObj.citizenDetailsResponse.citizenDetail[0].dzongkhagName
            var villageName = myObj.citizenDetailsResponse.citizenDetail[0].gewogName
            var gewogName = myObj.citizenDetailsResponse.citizenDetail[0].villageName
            $('#name').val(CitizenName);
            $('#dzongkhag').val(dzongkhagName);
            $('#gewog').val(gewogName);
            $('#village').val(villageName);
        }
    });
}

    function checkContact(value)
    {
        var firstDigit = value.charAt(0);
        var secondDigit = value.charAt(1);

        if(firstDigit != 7 && firstDigit != 1){
            $('#contactNumberErrorMsg').html("Must Start with either 1 or 7.");
            $('#contactNumberErrorMsg').show();
            $('#contactNumberErrorMsg').delay(2000).fadeOut('slow');
            $('#contactNumber').val("");
        }else if(firstDigit == 1 && secondDigit != 6 && secondDigit != 7){
            $('#contactNumberErrorMsg').html("Second Digit Must Start with either 6 or 7.");
            $('#contactNumberErrorMsg').show();
            $('#contactNumberErrorMsg').delay(2000).fadeOut('slow');
            $('#contactNumber').val("");
        }else if(firstDigit == 7 && secondDigit == 6){
            $('#contactNumberErrorMsg').html("Second Digit Cannot be 6.");
            $('#contactNumberErrorMsg').show();
            $('#contactNumberErrorMsg').delay(2000).fadeOut('slow');
            $('#contactNumber').val("");
        }else if(firstDigit == 7 && secondDigit != 7){
            $('#contactNumberErrorMsg').html("Second Digit Must Start with 7.");
            $('#contactNumberErrorMsg').show();
            $('#contactNumberErrorMsg').delay(2000).fadeOut('slow');
            $('#contactNumber').val("");
        }

    }

    function checkNonContact(value)
    {
        var firstDigit = value.charAt(0);
        var secondDigit = value.charAt(1);

        if(firstDigit != 7 && firstDigit != 1){
            $('#p_contactNumberErrorMsg').html("Must Start with either 1 or 7.");
            $('#p_contactNumberErrorMsg').show();
            $('#p_contactNumberErrorMsg').delay(2000).fadeOut('slow');
            $('#p_contactNumber').val("");
        }else if(firstDigit == 1 && secondDigit != 6 && secondDigit != 7){
            $('#p_contactNumberErrorMsg').html("Second Digit Must Start with either 6 or 7.");
            $('#p_contactNumberErrorMsg').show();
            $('#p_contactNumberErrorMsg').delay(2000).fadeOut('slow');
            $('#p_contactNumber').val("");
        }else if(firstDigit == 7 && secondDigit == 6){
            $('#p_contactNumberErrorMsg').html("Second Digit Cannot be 6.");
            $('#p_contactNumberErrorMsg').show();
            $('#p_contactNumberErrorMsg').delay(2000).fadeOut('slow');
            $('#p_contactNumber').val("");
        }else if(firstDigit == 7 && secondDigit != 7){
            $('#p_contactNumberErrorMsg').html("Second Digit Must Start with 7.");
            $('#p_contactNumberErrorMsg').show();
            $('#p_contactNumberErrorMsg').delay(2000).fadeOut('slow');
            $('#p_contactNumber').val("");
        }

    }

    function checkComContact(value)
    {
        var firstDigit = value.charAt(0);
        var secondDigit = value.charAt(1);

        if(firstDigit != 7 && firstDigit != 1){
            $('#com_contactNumberErrorMsg').html("Must Start with either 1 or 7.");
            $('#com_contactNumberErrorMsg').show();
            $('#com_contactNumberErrorMsg').delay(2000).fadeOut('slow');
            $('#com_contactNumber').val("");
        }else if(firstDigit == 1 && secondDigit != 6 && secondDigit != 7){
            $('#com_contactNumberErrorMsg').html("Second Digit Must Start with either 6 or 7.");
            $('#com_contactNumberErrorMsg').show();
            $('#com_contactNumberErrorMsg').delay(2000).fadeOut('slow');
            $('#com_contactNumber').val("");
        }else if(firstDigit == 7 && secondDigit == 6){
            $('#com_contactNumberErrorMsg').html("Second Digit Cannot be 6.");
            $('#com_contactNumberErrorMsg').show();
            $('#com_contactNumberErrorMsg').delay(2000).fadeOut('slow');
            $('#com_contactNumber').val("");
        }else if(firstDigit == 7 && secondDigit != 7){
            $('#com_contactNumberErrorMsg').html("Second Digit Must Start with 7.");
            $('#com_contactNumberErrorMsg').show();
            $('#com_contactNumberErrorMsg').delay(2000).fadeOut('slow');
            $('#com_contactNumber').val("");
        }
    }

function validateemailId(emailId)
{
    var pattern=/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$/;
    var no=emailId.match(pattern);

    if(no==null)
    {
        $('#com_emailErrorMsg').html("<span class='alert alert-danger'>The email Id is Not valid");
        $('#com_email').val("");
        $('#com_emailErrorMsg').show();
        $('#com_emailErrorMsg').delay(2000).fadeOut('slow');
    }else{
     $('#com_emailErrorMsg').hide();
    }

}

function validatecomemailId(emailId)
{
    var pattern=/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$/;
    var no=emailId.match(pattern);

    if(no==null)
    {
        $('#com_emailErrorMsg').html("<span class='alert alert-danger'>The email Id is Not valid");
        $('#com_email').val("");
        $('#com_emailErrorMsg').show();
        $('#com_emailErrorMsg').delay(2000).fadeOut('slow');
    }else{
     $('#com_emailErrorMsg').hide();
    }

}

function validatePassemailId(emailId)
{
    var pattern=/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$/;
    var no=emailId.match(pattern);

    if(no==null)
    {
        $('#p_emailErrorMsg').html("<span class='alert alert-danger'>The email Id is Not valid");
        $('#p_email').val("");
        $('#p_emailErrorMsg').show();
        $('#p_emailErrorMsg').delay(2000).fadeOut('slow');
    }else{
     $('#p_emailErrorMsg').hide();
    }

}
</script>
{% endblock %}