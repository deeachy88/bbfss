{% load static %}
<style>
    .row {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
    margin-right: -15px;
    margin-left: -2px;
}
form, input, select, textarea{
    color: black !important;
}
#loader img
{
  left: 50%;
  margin-left: -32px;
  margin-top: 12px;
  position: absolute;
  top: 50%;
}
.custom-control-input:disabled~.custom-control-description {
    color: rgb(0 0 0);
}

.a_head {
    color: #e6e8ec;
    text-decoration: none;
    background-color: transparent;
    -webkit-text-decoration-skip: objects;
}
</style>
<div class="accordion" role="tablist">
        <div class="card">
            <div class="card-header" role="tab" id="headingOne">
                <a data-toggle="collapse" href="#collapseOne" aria-expanded="false" aria-controls="collapseOne" class="collapsed a_head">
                    Application Details
                </a>
            </div>

            <div id="collapseOne" class="collapse" role="tabpanel" aria-labelledby="headingOne" data-parent="#accordion" style="">
                <div class="card-body">
                    {% for application_details in application_details %}
                {% if application_details.Inspection_Type == 'P' %}
                    <div class="row">
                        <div class="col-sm-2">
                            <label class="form-label">Inspection Type</label>
                        </div>
                        <div class="col-sm-4 justify-content-center">
                            <label class="custom-control custom-radio">
                                <input type="radio" class="custom-control-input" disabled>
                                <span class="custom-control-indicator"></span>
                                <span class="custom-control-description">Ante-mortem</span>
                            </label>
                            <label class="custom-control custom-radio">
                                <input type="radio" class="custom-control-input" checked>
                                <span class="custom-control-indicator"></span>
                                <span class="custom-control-description">Post-mortem</span>
                            </label>
                        </div>
                    </div><br>
                {% else %}
                    <div class="row">
                        <div class="col-sm-2">
                            <label class="form-label">Inspection Type</label>
                        </div>
                        <div class="col-sm-4 justify-content-center">
                            <label class="custom-control custom-radio">
                                <input type="radio" class="custom-control-input" checked>
                                <span class="custom-control-indicator"></span>
                                <span class="custom-control-description">Ante-mortem</span>
                            </label>
                            <label class="custom-control custom-radio">
                                <input type="radio" class="custom-control-input" disabled>
                                <span class="custom-control-indicator"></span>
                                <span class="custom-control-description">Post-mortem</span>
                            </label>
                        </div>
                    </div><br>
                {% endif %}
                <br>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label">Applicant CID</label>
                            <input type="number"  class="form-control" value="{{ application_details.CID }}" disabled>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label">Name</label>
                            <input type="text" class="form-control" value="{{ application_details.Applicant_Name }}" disabled>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label">Dzongkhag &nbsp;<font color='red'>*</font></label>
                            <input type="text" class="form-control" value="{{application_details.Dzongkhag_Code}}" disabled>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label">Gewog &nbsp;<font color='red'>*</font></label>
                            <input type="text" class="form-control" value="{{application_details.Gewog_Code}}" disabled>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label">Village &nbsp;<font color='red'>*</font></label>
                            <input type="text" class="form-control" value="{{application_details.Village_Code}}" disabled>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label">Address</label>
                            <textarea class="form-control" disabled>{{application_details.Address}}</textarea>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label">Contact Number</label>
                            <input type="number" class="form-control" value="{{application_details.Contact_No}}" disabled>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" value="{{application_details.Email}}" disabled>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label">Dzongkhag</label>
                            <select class="form-control" disabled>
                                {% for dzongkhag in dzongkhag %}
                                    <option value="{{ dzongkhag.Dzongkhag_Code }}" {% if application_details.Location_Dzongkhag_Code == dzongkhag.Dzongkhag_Code %}selected{% endif %}>{{ dzongkhag.Dzongkhag_Name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label">Location</label>
                             <select class="form-control" disabled>
                                {% for location in location %}
                                    <option value="{{ location.Location_Code }}" {% if application_details.Location_Code == location.Location_Code %}selected{% endif %}>{{ location.Location_Name }}</option>
                                {% endfor %}
                             </select>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label">Exact Location</label>
                            <input type="text" class="form-control" value="{{application_details.Exact_Location}}" disabled>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label">Request Date for Inspection</label>
                             <input type="text"  class="form-control" value="{{application_details.Inspection_Date_Requested}}" disabled>
                        </div>
                    </div>
                </div>
            {% endfor %}
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header" role="tab" id="mortem_details">
                <a class="collapsed a_head" data-toggle="collapse" href="#collapseDetails" aria-expanded="false" aria-controls="collapseTwo">
                    Details
                </a>
            </div>
            <div id="collapseDetails" class="collapse" role="tabpanel" aria-labelledby="headingTwo" data-parent="#accordion" style="">
                <div class="card-body">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">Species</th>
                                <th scope="col">Nos</th>
                                <th scope="col">Quantity</th>
                                <th scope="col">Remarks</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for mortem in mortem %}
                                <tr>
                                    <td>{{ forloop.counter }}</td>
                                    <td>{{mortem.Species}}</td>
                                    <td>{{mortem.Nos}}</td>
                                    <td>{{mortem.Quantity}}</td>
                                    <td>{{mortem.Remarks}}</td>
                                </tr>
                                {% empty %}
                                <tr>
                                    <td colspan="5" class="text-center">No Data</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header" role="tab" id="headingTwo">
                <a class="collapsed a_head" data-toggle="collapse" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                    Attachments
                </a>
            </div>
            <div id="collapseTwo" class="collapse" role="tabpanel" aria-labelledby="headingTwo" data-parent="#accordion" style="">
                <div class="card-body">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">File</th>
                            </tr>
                        </thead>
                        <tbody>
                           {% for file_attach in file %}
                                <tr>
                                    <td>{{ forloop.counter }}</td>
                                    <td><a href='{{file_attach.file_path}}' target="_blank">{{file_attach.attachment}}</a></td>
                                </tr>
                                {% empty %}
                                <tr>
                                  <td colspan="3" class="text-center">No Data</td>
                                </tr>
                           {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header" role="tab" id="headingThree">
                <a class="collapsed a_head" data-toggle="collapse" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                    Inspector Details
                </a>
            </div>
            <div class="card-body">
                <form method="post" id="ins_form">
                    {% csrf_token %}
                    <div id="collapseThree" class="active" role="tabpanel" aria-labelledby="headingThree" data-parent="#accordion" style="">
                        <div class="form-group col-lg-12 mx-auto d-flex align-items-center my-4">
                            <div class="border-bottom w-100 ml-5" style="border: 1px solid#888;"></div>
                                <span class="px-2 small text-muted font-weight-bold text-muted form-label" style="margin-right: -11px;">Ante-</span>
                                <span class="px-2 small text-muted font-weight-bold text-muted form-label" style="margin-right: -11px;">mortem </span>&nbsp;
                                <span class="px-1 small text-muted font-weight-bold text-muted form-label"> Examination</span>
                            <div class="border-bottom w-100 mr-5" style="border: 1px solid#888;"></div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                <label class="form-label">Abnormalities in Respiration (If the breathing pattern is different from normal the animal should be segregated as a suspect) <font color="red">*</font></label>
                            </div>
                            <div class="col-sm-8 justify-content-center">
                                <label class="custom-control custom-radio">
                                    <input type="radio" name="Respiration_Abnormalities" class="custom-control-input" value="Yes">
                                    <span class="custom-control-indicator"></span>
                                    <span class="custom-control-description">Yes</span>
                                </label>
                                <label class="custom-control custom-radio">
                                    <input type="radio" name="Respiration_Abnormalities" class="custom-control-input" value="No">
                                    <span class="custom-control-indicator"></span>
                                    <span class="custom-control-description">No</span>
                                </label>
                                <div class="alert alert-danger" id="Respiration_AbnormalitiesErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <div class="col-sm-4">
                                <label class="form-label">Abnormalities in behaviour <font color="red">*</font></label>
                            </div>
                            <div class="col-sm-8 justify-content-center">
                                <div class="form-check">
                                  <input class="form-check-input" type="checkbox" name="Abnormalities_Behaviour_1" value="1">
                                  <label class="form-check-label">
                                    Animal is calm, active and do not show any uncharacteristic behaviour
                                  </label>
                                </div>
                                <div class="form-check">
                                  <input class="form-check-input" type="checkbox" name="Abnormalities_Behaviour_2" value="1">
                                  <label class="form-check-label">
                                    Animal walk in circle or show an abnormal gait or posture
                                  </label>
                                </div>
                                <div class="form-check">
                                  <input class="form-check-input" type="checkbox" name="Abnormalities_Behaviour_3" value="1">
                                  <label class="form-check-label">
                                    pushing its head against a wall
                                  </label>
                                </div>
                                <div class="form-check">
                                  <input class="form-check-input" type="checkbox" name="Abnormalities_Behaviour_4" value="1">
                                  <label class="form-check-label">
                                    showing a dull and anxious expression in the eyes
                                  </label>
                                </div>
                                <div class="alert alert-danger" id="Abnormalities_BehaviourErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <div class="col-sm-4">
                                <label class="form-label">Abnormalities in structure <font color="red">*</font></label>
                            </div>
                            <div class="col-sm-8 justify-content-center">
                                <div class="form-check">
                                  <input class="form-check-input" type="checkbox" name="Abnormalities_Structure_1" value="1">
                                  <label class="form-check-label">
                                    swellings (abscesses) seen commonly in swine
                                  </label>
                                </div>
                                <div class="form-check">
                                  <input class="form-check-input" type="checkbox" name="Abnormalities_Structure_2" value="1">
                                  <label class="form-check-label">
                                    enlarged joints
                                  </label>
                                </div>
                                <div class="form-check">
                                  <input class="form-check-input" type="checkbox" name="Abnormalities_Structure_3" value="1">
                                  <label class="form-check-label">
                                    umbilical swelling
                                  </label>
                                </div>
                                <div class="form-check">
                                  <input class="form-check-input" type="checkbox" name="Abnormalities_Structure_4" value="1">
                                  <label class="form-check-label">
                                    enlarged jaw (“lumpy jaw”)
                                  </label>
                                </div>
                                <div class="form-check">
                                  <input class="form-check-input" type="checkbox" name="Abnormalities_Structure_5" value="1">
                                  <label class="form-check-label">
                                    Abdominal distension
                                  </label>
                                </div>
                                <div class="form-check">
                                  <input class="form-check-input" type="checkbox" name="Abnormalities_Structure_6" value="1">
                                  <label class="form-check-label">
                                    Any lesions
                                  </label>
                                </div>
                                <div class="alert alert-danger" id="Abnormalities_StructureErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <div class="col-sm-4">
                                <label class="form-label">An abnormal gait (associated with pain in the legs, chest or abdomen or is an indication of nervous disease) <font color="red">*</font></label>
                            </div>
                            <div class="col-sm-8 justify-content-center">
                                <label class="custom-control custom-radio">
                                    <input type="radio" name="gait" class="custom-control-input" value="Yes">
                                    <span class="custom-control-indicator"></span>
                                    <span class="custom-control-description">Yes</span>
                                </label>
                                <label class="custom-control custom-radio">
                                    <input type="radio" name="gait" class="custom-control-input" value="No">
                                    <span class="custom-control-indicator"></span>
                                    <span class="custom-control-description">No</span>
                                </label>
                                <div class="alert alert-danger" id="gaitErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <div class="col-sm-4">
                                <label class="form-label">Abnormalities in posture (Downer animals should be handled with caution in order to prevent further suffering) <font color="red">*</font></label>
                            </div>
                            <div class="col-sm-8 justify-content-center">
                                <label class="custom-control custom-radio">
                                    <input type="radio" name="posture" class="custom-control-input" value="Yes">
                                    <span class="custom-control-indicator"></span>
                                    <span class="custom-control-description">Yes</span>
                                </label>
                                <label class="custom-control custom-radio">
                                    <input type="radio" name="posture" class="custom-control-input" value="No">
                                    <span class="custom-control-indicator"></span>
                                    <span class="custom-control-description">No</span>
                                </label>
                                <div class="alert alert-danger" id="postureErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <div class="col-sm-4">
                                <label class="form-label">Abnormal discharges or protrusions from the body <font color="red">*</font></label>
                            </div>
                            <div class="col-sm-8 justify-content-center">
                                <div class="form-check">
                                  <input class="form-check-input" type="checkbox" name="Discharge_Abnormalities_1" value="1">
                                  <label class="form-check-label">
                                    discharges from the nose, excessive saliva from the mouth
                                  </label>
                                </div>
                                 <div class="form-check">
                                  <input class="form-check-input" type="checkbox" name="Discharge_Abnormalities_2" value="1">
                                  <label class="form-check-label">
                                    protruding from the vulva, intestine, vagina, rectum and uterus
                                  </label>
                                </div>
                                 <div class="form-check">
                                  <input class="form-check-input" type="checkbox" name="Discharge_Abnormalities_3" value="1">
                                  <label class="form-check-label">
                                    growths on the eye and bloody diarrhoea
                                  </label>
                                </div>
                                <div class="alert alert-danger" id="Discharge_AbnormalitiesErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <div class="col-sm-4">
                                <label class="form-label">Abnormal colour (black areas on horses and swine, red areas on light coloured skin (inflammation), dark blue areas on the skin or udder (gangrene). <font color="red">*</font></label>
                            </div>
                            <div class="col-sm-8 justify-content-center">
                                <label class="custom-control custom-radio">
                                    <input type="radio" name="colour" class="custom-control-input" value="Yes">
                                    <span class="custom-control-indicator"></span>
                                    <span class="custom-control-description">Yes</span>
                                </label>
                                <label class="custom-control custom-radio">
                                    <input type="radio" name="colour" class="custom-control-input" value="No">
                                    <span class="custom-control-indicator"></span>
                                    <span class="custom-control-description">No</span>
                                </label>
                                <div class="alert alert-danger" id="colourErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <div class="col-sm-4">
                                <label class="form-label">An abnormal odour (odour of an abscess, a medicinal odour, stinkweed odour or an acetone odour of ketosis) <font color="red">*</font></label>
                            </div>
                            <div class="col-sm-8 justify-content-center">
                                <label class="custom-control custom-radio">
                                    <input type="radio" name="odour" class="custom-control-input" value="Yes">
                                    <span class="custom-control-indicator"></span>
                                    <span class="custom-control-description">Yes</span>
                                </label>
                                <label class="custom-control custom-radio">
                                    <input type="radio" name="odour" class="custom-control-input" value="No">
                                    <span class="custom-control-indicator"></span>
                                    <span class="custom-control-description">No</span>
                                </label>
                                <div class="alert alert-danger" id="odourErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <br>
                        <div class="form-group col-lg-12 mx-auto d-flex align-items-center my-4">
                            <div class="border-bottom w-100 ml-5" style="border: 1px solid#888;"></div>
                                <span class="px-2 small text-muted font-weight-bold text-muted form-label" style="margin-right: -11px;">Decision</span>
                                <span class="px-2 small text-muted font-weight-bold text-muted form-label" style="margin-right: -11px;">of</span>
                                <span class="px-2 small text-muted font-weight-bold text-muted form-label" style="margin-right: -11px;">the </span>&nbsp;
                                <span class="px-1 small text-muted font-weight-bold text-muted form-label">Ante</span>
                                <span class="px-1 small text-muted font-weight-bold text-muted form-label">-</span>
                                <span class="px-1 small text-muted font-weight-bold text-muted form-label">Mortem</span>
                                <span class="px-1 small text-muted font-weight-bold text-muted form-label">Inspection</span>
                                <span class="px-1 small text-muted font-weight-bold text-muted form-label">Report</span>
                            <div class="border-bottom w-100 mr-5" style="border: 1px solid#888;"></div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>No. of Animal passed as Fit for Slaughter without restrictions (Animals with no obvious diseases or abnormal conditions) <font color="red">*</font></label>
                                    <input type="text" class="form-control" id="fit_for_slaughter" name="No_Without_Restrictions" onkeypress="return isNumberKey(event)">
                                </div>
                                <div class="alert alert-danger" id="fit_for_slaughterErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>No. of animals permitted for slaughter but under close supervision (Animals suspected for anemia, jaundice, oedema, ecthyma,  etc.) <font color="red">*</font></label>
                                    <input type="text" class="form-control" id="fit_for_slaughter_supervision" name="No_Close_Supervision" onkeypress="return isNumberKey(event)">
                                </div>
                                <div class="alert alert-danger" id="fit_for_slaughter_supervisionErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>No. of animals withheld for slaughter (In the opinion of inspector, the animal with a disease or condition would likely respond to a delay in slaughtering or to a suitable treatment such as metaboli disease, disturbance to CNS etc.) <font color="red">*</font></label>
                                    <input type="text" class="form-control" id="withheld_for_slaughter" name="No_Withheld" onkeypress="return isNumberKey(event)">
                                </div>
                                <div class="alert alert-danger" id="withheld_for_slaughterErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Emergency slaughter of animals(Animals which are in acute pain from a condition where a delay in slaughter will compromise the animal welfare.) <font color="red">*</font></label>
                                    <input type="text" class="form-control" id="emergency_slaughter" name="No_Emergency" onkeypress="return isNumberKey(event)">
                                </div>
                                <div class="alert alert-danger" id="emergency_slaughterErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Unfit for Human Consumption (Animals with infectious disseases such as tetanus, Hemorrhagic septicemina, swine fever, botulism, etc.) <font color="red">*</font></label>
                                    <input type="text" class="form-control" id="unfit_for_consumption" name="unfit_for_consumption" onkeypress="return isNumberKey(event)">
                                </div>
                                <div class="alert alert-danger" id="unfit_for_consumptionErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>Inspection Team Leader <font color="red">*</font></label>
                                    <select class="form-control" name="Inspection_Leader"  id="teamLeader">
                                        <option value="">--SELECT TEAM LEADER--</option>
                                        {% for inspector_list in inspector_list %}
                                                <option value="{{ inspector_list.Login_Id }}">{{ inspector_list.Name }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="alert alert-danger" id="teamLeaderErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="insTeam">Inspection Team <font color="red">*</font></label>
                                    <textarea class="form-control" name="Inspection_Team" id="insTeam" rows="2"></textarea>
                                </div>
                                <div class="alert alert-danger" id="insTeamErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>Date Of Inspection <font color="red">*</font></label>
                                    <input type="date" class="form-control" id="dateOfInspection" name="dateOfInspection">
                                </div>
                                <div class="alert alert-danger" id="dateOfInspectionErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Validity(No Of Days) <font color="red">*</font></label>
                                    <input type="text" class="form-control" id="validity" name="validity" onkeypress="return isNumberKey(event)" onchange="check_validity(this.value)">
                                </div>
                                <div class="alert alert-danger" id="validityErrorMsg" style="display:none"></div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Remarks</label>
                                    <textarea class="form-control" id="remarks" rows="2"></textarea>
                                </div>
                                <div class="alert alert-danger" id="remarksErrorMsg" style="display:none"></div>
                            </div>
                        </div>
                        <div class="alert alert-info" id="approve_Msg" style="display:none"></div>
                        <hr>
                        <div id="loader" style="display:none">
                            <img src="{% static 'assets/img/ajax-loader.gif' %}" alt="processing..." />
                        </div>
                        {% for application_details in application_details %}
                            <input type="hidden" value="{{application_details.Application_No}}" name="application_id">
                            <div class="card-action text-center">
                                <button type="button" class="btn btn-flat btn-primary" onclick="approve_details()">
                                    <i class="ace-icon fa fa-check"></i>
                                    &nbsp;&nbsp;Approve
                                </button>
                                <button type="button" class="btn btn-flat btn-primary" onclick="reject_details('{{application_details.Application_No}}')">
                                    <i class="ace-icon fa fa-times"></i>
                                    &nbsp;&nbsp;Reject
                                </button>
                            </div>
                        {% endfor %}
                        </div>
                </form>
            </div>
        </div>
</div>
<script src="{% static 'assets/js/app.min.js' %}"></script>
<script>
function isNumberKey(evt)
{
 var charCode = (evt.which) ? evt.which : event.keyCode
 if (charCode > 31 && (charCode < 48 || charCode > 57))
    return false;

 return true;
}

$(function(){
    var today = new Date().toISOString().split('T')[0];
    $('#dateOfInspection')[0].setAttribute('min', today);
});

function approve_details()
{
    Respiration_Abnormalities = $("input[name=Respiration_Abnormalities]:checked").length;
    Abnormalities_Behaviour_1 = $("input[name=Abnormalities_Behaviour_1]:checked").val();
    Abnormalities_Behaviour_2 = $("input[name=Abnormalities_Behaviour_2]:checked").val();
    Abnormalities_Behaviour_3 = $("input[name=Abnormalities_Behaviour_3]:checked").val();
    Abnormalities_Behaviour_4 = $("input[name=Abnormalities_Behaviour_4]:checked").val();
    Abnormalities_Structure_1 = $("input[name=Abnormalities_Structure_1]:checked").val();
    Abnormalities_Structure_2 = $("input[name=Abnormalities_Structure_2]:checked").val();
    Abnormalities_Structure_3 = $("input[name=Abnormalities_Structure_3]:checked").val();
    Abnormalities_Structure_4 = $("input[name=Abnormalities_Structure_4]:checked").val();
    Abnormalities_Structure_5 = $("input[name=Abnormalities_Structure_5]:checked").val();
    Abnormalities_Structure_6 = $("input[name=Abnormalities_Structure_6]:checked").val();
    gait = $("input[name=gait]:checked").length;
    posture = $("input[name=posture]:checked").length;
    Discharge_Abnormalities_1 = $("input[name=Discharge_Abnormalities_1]:checked").val();
    Discharge_Abnormalities_2 = $("input[name=Discharge_Abnormalities_2]:checked").val();
    Discharge_Abnormalities_3 = $("input[name=Discharge_Abnormalities_3]:checked").val();
    colour = $("input[name=colour]:checked").length;
    odour = $("input[name=odour]:checked").length;
    fit_for_slaughter = $('#fit_for_slaughter').val();
    fit_for_slaughter_supervision = $('#fit_for_slaughter_supervision').val();
    withheld_for_slaughter = $('#withheld_for_slaughter').val();
    emergency_slaughter = $('#emergency_slaughter').val();
    unfit_for_consumption = $('#unfit_for_consumption').val();
    Inspection_Leader = $('#teamLeader').val();
    Inspection_Team = $('#insTeam').val();
    remarks = $('#remarks').val();
    dateOfInspection = $('#dateOfInspection').val();
    validity = $('#validity').val();

    if(Respiration_Abnormalities < 1)
    {
        $('#Respiration_AbnormalitiesErrorMsg').html("Choose One.");
        $('#Respiration_AbnormalitiesErrorMsg').show();
        $('#Respiration_AbnormalitiesErrorMsg').delay(2000).fadeOut('slow');
        $("input[name=Respiration_Abnormalities]").focus();
    }
    else if(Abnormalities_Behaviour_1 != "1" && Abnormalities_Behaviour_2 != "1" && Abnormalities_Behaviour_3 != "1" && Abnormalities_Behaviour_4 != "1")
    {
        $('#Abnormalities_BehaviourErrorMsg').html("Choose One.");
        $('#Abnormalities_BehaviourErrorMsg').show();
        $('#Abnormalities_BehaviourErrorMsg').delay(2000).fadeOut('slow');
        $("input[name=Abnormalities_Behaviour_1]").focus();
    }
    else if(Abnormalities_Structure_1 != "1" && Abnormalities_Structure_2 != "1" && Abnormalities_Structure_3 != "1" && Abnormalities_Structure_4 != "1" && Abnormalities_Structure_5 != "1" && Abnormalities_Structure_6 != "1")
    {
        $('#Abnormalities_StructureErrorMsg').html("Choose One.");
        $('#Abnormalities_StructureErrorMsg').show();
        $('#Abnormalities_StructureErrorMsg').delay(2000).fadeOut('slow');
        $("input[name=Abnormalities_Structure_1]").focus();
    }
    else if(gait < 1)
    {
        $('#gaitErrorMsg').html("Choose One.");
        $('#gaitErrorMsg').show();
        $('#gaitErrorMsg').delay(2000).fadeOut('slow');
        $("input[name=gait]").focus();
    }
    else if(posture < 1)
    {
        $('#postureErrorMsg').html("Choose One.");
        $('#postureErrorMsg').show();
        $('#postureErrorMsg').delay(2000).fadeOut('slow');
        $("input[name=posture]").focus();
    }
    else if(Discharge_Abnormalities_1 != "1" && Discharge_Abnormalities_2 != "1" && Discharge_Abnormalities_3 != "1")
    {
        $('#Discharge_AbnormalitiesErrorMsg').html("Choose One.");
        $('#Discharge_AbnormalitiesErrorMsg').show();
        $('#Discharge_AbnormalitiesErrorMsg').delay(2000).fadeOut('slow');
        $("input[name=Discharge_Abnormalities_1]").focus();
    }
    else if(colour < 1)
    {
        $('#colourErrorMsg').html("Choose One.");
        $('#colourErrorMsg').show();
        $('#colourErrorMsg').delay(2000).fadeOut('slow');
        $("input[name=colour]").focus();
    }
    else if(odour < 1)
    {
        $('#odourErrorMsg').html("Choose One.");
        $('#odourErrorMsg').show();
        $('#odourErrorMsg').delay(2000).fadeOut('slow');
        $("input[name=odour]").focus();
    }
    else if(fit_for_slaughter == "")
    {
        $('#fit_for_slaughterErrorMsg').html("Cannot Be Empty.");
        $('#fit_for_slaughterErrorMsg').show();
        $('#fit_for_slaughterErrorMsg').delay(2000).fadeOut('slow');
        $('#fit_for_slaughter').focus();
    }
    else if(fit_for_slaughter_supervision == "")
    {
        $('#fit_for_slaughter_supervisionErrorMsg').html("Cannot Be Empty.");
        $('#fit_for_slaughter_supervisionErrorMsg').show();
        $('#fit_for_slaughter_supervisionErrorMsg').delay(2000).fadeOut('slow');
        $('#fit_for_slaughter_supervision').focus();
    }
    else if(withheld_for_slaughter == "")
    {
        $('#withheld_for_slaughterErrorMsg').html("Cannot Be Empty.");
        $('#withheld_for_slaughterErrorMsg').show();
        $('#withheld_for_slaughterErrorMsg').delay(2000).fadeOut('slow');
        $('#withheld_for_slaughter').focus();
    }
    else if(emergency_slaughter == "")
    {
        $('#emergency_slaughterErrorMsg').html("Cannot Be Empty.");
        $('#emergency_slaughterErrorMsg').show();
        $('#emergency_slaughterErrorMsg').delay(2000).fadeOut('slow');
        $('#emergency_slaughter').focus();
    }
    else if(unfit_for_consumption == "")
    {
        $('#unfit_for_consumptionErrorMsg').html("Cannot Be Empty.");
        $('#unfit_for_consumptionErrorMsg').show();
        $('#unfit_for_consumptionErrorMsg').delay(2000).fadeOut('slow');
        $('#unfit_for_consumption').focus();
    }
    else if(Inspection_Leader == "")
    {
        $('#teamLeaderErrorMsg').html("Select Team Leader.");
        $('#teamLeaderErrorMsg').show();
        $('#teamLeaderErrorMsg').delay(2000).fadeOut('slow');
        $('#teamLeader').focus();
    }
    else if(Inspection_Team == "")
    {
        $('#insTeamErrorMsg').html("Enter Inspection Team.");
        $('#insTeamErrorMsg').show();
        $('#insTeamErrorMsg').delay(2000).fadeOut('slow');
        $('#insTeam').focus();
    }
    else if(dateOfInspection == "")
    {
        $('#dateOfInspectionErrorMsg').html("Select Date Of Inspection.");
        $('#dateOfInspectionErrorMsg').show();
        $('#dateOfInspectionErrorMsg').delay(2000).fadeOut('slow');
        $('#dateOfInspection').focus();
    }
    else if(validity== "")
    {
        $('#validityErrorMsg').html("Enter Validity.");
        $('#validityErrorMsg').show();
        $('#validityErrorMsg').delay(2000).fadeOut('slow');
        $('#validity').focus();
    }

    else
    {
        $("#loader").show();
        $.ajax({
            type : "POST",
            url : "{% url 'approve_application_apm' %}",
            data :$('#ins_form').serialize(),
            success : function(data) {
                $("#loader").hide();
                $('#approve_Msg').html("Application Approved.");
                $('#approve_Msg').show();
                $('#approve_Msg').delay(2000).fadeOut('slow');
                setTimeout(function() {
                    window.location.href = '{% url 'dashboard' %}';
                }, 3000);
            }
        });
    }
}

function reject_details(application_id)
{

    Inspection_Leader = $('#teamLeader').val();
    Inspection_Team = $('#insTeam').val();
    remarks = $('#remarks').val();
    dateOfInspection = $('#dateOfInspection').val();
    ins_type = $('#ins_type').val();
    identification_No = $('#identification_No').val();


    if(remarks == "")
    {
        $('#remarksErrorMsg').html("Enter Remarks.");
        $('#remarksErrorMsg').show();
        $('#remarksErrorMsg').delay(2000).fadeOut('slow');
        $('#remarks').focus();
    }
    else
    {
        $("#loader").show();
        $.ajax({
            type : "GET",
            url : "{% url 'reject_application_apm' %}",
            data :{'application_id':application_id , 'Inspection_Leader':Inspection_Leader ,'Inspection_Team':Inspection_Team ,'remarks':remarks ,
            'dateOfInspection':dateOfInspection, 'ins_type':ins_type, 'identification_No':identification_No},
            success : function(data) {
                $("#loader").hide();
                $('#approve_Msg').html("Application Rejected.");
                $('#approve_Msg').show();
                $('#approve_Msg').delay(2000).fadeOut('slow');
                 setTimeout(function() {
                    location.reload();
                }, 3000);
            }
        });
    }
}

function check_validity(validity)
{
    if(validity == 0)
    {
        $('#validityErrorMsg').html("Must Be Greater Than Zero.");
        $('#validityErrorMsg').show();
        $('#validityErrorMsg').delay(2000).fadeOut('slow');
        $('#validity').val("");
    }
    else
    {
        $('#validityErrorMsg').hide();
    }
}
</script>