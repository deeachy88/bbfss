<!DOCTYPE html>
<html lang="en">
{% load static %}
<!--Designed By ALpha-->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>BAFRA | Bhutan Biosecurity and Food Safety System</title>

    <!-- Vendor styles -->
    <link rel="stylesheet" href="{% static 'assets/bower_components/material-design-iconic-font/dist/css/material-design-iconic-font.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/bower_components/animate.css/animate.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/bower_components/jquery.scrollbar/jquery.scrollbar.css' %}">
    <link rel="stylesheet" href="{% static 'assets/bower_components/fullcalendar/dist/fullcalendar.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/bower_components/flatpickr/dist/flatpickr.min.css' %}" />
    <!-- App styles -->
    <link rel="stylesheet" href="{% static 'assets/fontawesome/css/all.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/app.min.css' %}">

    <style>
        .dt-buttons
        {
            display: flex;
            font-size: 18px;
        }
        .dt-button{
            padding-right: 5px;
        }

    </style>
</head>
    <body data-sa-theme="7">
        <main class="main">
            <div class="flex-wrapper">
                <div class="page-loader">
                    <div class="page-loader__spinner">
                        <svg viewBox="25 25 50 50">
                            <circle cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10" />
                        </svg>
                    </div>
                </div>

                <header class="header">
                    <div class="navigation-trigger" data-sa-action="aside-open" data-sa-target=".sidebar">
                        <i class="zmdi zmdi-menu"></i>
                    </div>
                    <div class="logo hidden-sm-down">
                        <h1><a href="index-2.html">BAFRA | Bhutan Biosecurity and Food Safety System</a></h1>
                    </div>

                    <ul class="top-nav">
                        <li class="dropdown hidden-xs-down">
                            <a href="#" data-toggle="dropdown"><i class="zmdi zmdi-accounts"></i></a>
                            <div class="dropdown-menu dropdown-menu-right dropdown-menu--block" role="menu">
                                <div class="listview listview--hover">
                                    <a href="{% url 'account_settings' %}" class="view-more">Account Settings</a>
                                    <a href="{% url 'logout' %}" class="view-more">Log-Out</a>
                                </div>
                            </div>
                        </li>
                        <li class="dropdown hidden-xs-down">
                            <a href="#" data-toggle="dropdown"><i class="zmdi zmdi-more-vert"></i></a>
                            <div class="dropdown-menu dropdown-menu-right">
                                <div class="dropdown-item theme-switch">
                                    Theme Switch
                                    <div class="btn-group btn-group--colors mt-2 d-block" data-toggle="buttons">
                                        <label class="btn active border-0" style="background-color: #772036"><input type="radio" value="1" autocomplete="off" checked></label>
                                        <label class="btn border-0" style="background-color: #273C5B"><input type="radio" value="2" autocomplete="off"></label>
                                        <label class="btn border-0" style="background-color: #174042"><input type="radio" value="3" autocomplete="off"></label>
                                        <label class="btn border-0" style="background-color: #383844"><input type="radio" value="4" autocomplete="off"></label>
                                        <label class="btn border-0" style="background-color: #49423F"><input type="radio" value="5" autocomplete="off"></label>
                                        <br>
                                        <label class="btn border-0" style="background-color: #5e3d22"><input type="radio" value="6" autocomplete="off"></label>
                                        <label class="btn border-0" style="background-color: #234d6d"><input type="radio" value="7" autocomplete="off"></label>
                                        <label class="btn border-0" style="background-color: #3b5e5e"><input type="radio" value="8" autocomplete="off"></label>
                                        <label class="btn border-0" style="background-color: #0a4c3e"><input type="radio" value="9" autocomplete="off"></label>
                                        <label class="btn border-0" style="background-color: #7b3d54"><input type="radio" value="10" autocomplete="off"></label>
                                    </div>
                                </div>
                                <a href="#" class="dropdown-item" data-sa-action="fullscreen">Fullscreen</a>
                                <a href="#" class="dropdown-item">Clear Local Storage</a>
                            </div>
                        </li>

                    </ul>
                </header>

                <aside class="sidebar sidebar--hidden">
                    {% include 'side-bar.html' %}
                </aside>

                <section class="content content--full">
                    {% block content %}


                    {% endblock %}
                </section>
                <footer class="footer">
                Â© BAFRA- Bhutan Biosecurity And Food Safety System (BBFSS), 2021. All Rights Reserved.
                </footer>
            </div>
        </main>

        <!-- Older IE warning message -->
            <!--[if IE]>
                <div class="ie-warning">
                    <h1>Warning!!</h1>
                    <p>You are using an outdated version of Internet Explorer, please upgrade to any of the following web browsers to access this website.</p>

                    <div class="ie-warning__downloads">
                        <a href="http://www.google.com/chrome">
                            <img src="img/browsers/chrome.png" alt="">
                        </a>

                        <a href="https://www.mozilla.org/en-US/firefox/new">
                            <img src="img/browsers/firefox.png" alt="">
                        </a>

                        <a href="http://www.opera.com">
                            <img src="img/browsers/opera.png" alt="">
                        </a>

                        <a href="https://support.apple.com/downloads/safari">
                            <img src="img/browsers/safari.png" alt="">
                        </a>

                        <a href="https://www.microsoft.com/en-us/windows/microsoft-edge">
                            <img src="img/browsers/edge.png" alt="">
                        </a>

                        <a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie">
                            <img src="img/browsers/ie.png" alt="">
                        </a>
                    </div>
                    <p>Sorry for the inconvenience!</p>
                </div>

            <![endif]-->

       <!-- Javascript -->
        <!-- Vendors -->
        <script src="{% static 'assets/bower_components/jquery/dist/jquery.min.js' %}"></script>
        <script src="{% static 'assets/bower_components/popper.js/dist/umd/popper.min.js' %}"></script>
        <script src="{% static 'assets/bower_components/bootstrap/dist/js/bootstrap.min.js' %}"></script>
        <script src="{% static 'assets/bower_components/jquery.scrollbar/jquery.scrollbar.min.js' %}"></script>
        <script src="{% static 'assets/bower_components/jquery-scrollLock/jquery-scrollLock.min.js' %}"></script>
        <script src="{% static 'assets/bower_components/salvattore/dist/salvattore.min.js' %}"></script>
        <script src="{% static 'assets/bower_components/flot/jquery.flot.js' %}"></script>
        <script src="{% static 'assets/bower_components/flot/jquery.flot.resize.js' %}"></script>
        <script src="{% static 'assets/bower_components/flatpickr/dist/flatpickr.min.js' %}"></script>
        <script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js'></script>
        <script src="{% static 'styles/datatables.net/js/jquery.dataTables.min.js' %}"></script>
        <script src="{% static 'assets/bower_components/datatables.net/js/jquery.dataTables.min.js' %}"></script>
        <script src="{% static 'assets/bower_components/datatables.net-buttons/js/dataTables.buttons.min.js' %}"></script>
        <script src="{% static 'assets/bower_components/datatables.net-buttons/js/buttons.print.min.js' %}"></script>
        <script src="{% static 'assets/bower_components/jszip/dist/jszip.min.js' %}"></script>
        <script src="{% static 'assets/bower_components/datatables.net-buttons/js/buttons.html5.min.js' %}"></script>
        <script src="{% static 'assets/js/sweetalert.min.js' %}"></script>
        <script src="{% static 'assets/js/app.min.js' %}"></script>
        <script src="{% static 'assets/js/user.js' %}"></script>
	    <script src="{% static 'assets/js/division.js' %}"></script>
        <script src="{% static 'assets/js/unit.js' %}"></script>
        <script src="{% static 'assets/js/crop_category.js' %}"></script>
        <script src="{% static 'assets/js/plant_crop.js' %}"></script>
        <script src="{% static 'assets/js/plant_crop_species.js' %}"></script>
        <script src="{% static 'assets/js/plant_crop_variety.js' %}"></script>
        <script src="{% static 'assets/js/chemical.js' %}"></script>
        <script src="{% static 'assets/js/ornamental.js' %}"></script>
        <script src="{% static 'assets/js/pesticide.js' %}"></script>
        <script src="{% static 'assets/js/product.js' %}"></script>
        <script src="{% static 'assets/js/plant_fodder.js' %}"></script>
        <script src="{% static 'assets/js/fodder_variety.js' %}"></script>
        <script src="{% static 'assets/js/location_mapping.js' %}"></script>
        <script src="{% static 'assets/js/livestock_species.js' %}"></script>
        <script src="{% static 'assets/js/livestock_species_breed.js' %}"></script>
        <script src="{% static 'assets/js/livestock_product.js' %}"></script>
        <script src="{% static 'assets/js/moment.js' %}"></script>
        <script src="{% static 'assets/js/jQuery.print.js' %}"></script>
        <script src="{% static 'assets/js/pdfmake.min.js' %}"></script>
        <script src="{% static 'assets/js/vfs_fonts.js' %}"></script>
        <script type="text/javascript" src="{% static 'assets/js/printThis.js' %}"></script>
        <script>
            function isNumberKey(evt)
            {
                var charCode = (evt.which) ? evt.which : evt.keyCode
                if (charCode > 31 && (charCode < 48 || charCode > 57))
                    return false;
                return true;
            }
            $(function ()
            {
                $("#user-table").DataTable({
                    dom: 'Bfrtip',
                    buttons: [

                        {
                            extend: 'excelHtml5',
                            title: 'List Of Users',
                            text:'<i class="fas fa-file-excel"></i>',
                            titleAttr: 'Excel'
                        },
                        {
                            extend: 'pdfHtml5',
                            title: 'List Of Users',
                            text:'<i class="fas fa-file-pdf"></i>',
                            titleAttr: 'PDF'
                        },
                         {
                            extend: 'print',
                            title: 'List Of Users',
                            text: '<i class="fas fa-print"></i>',
                            titleAttr: 'Print'
                        },
                    ]
                });
            });

            $(document).ready(function()
             {
                $("#sectionDiv").hide();
                $("#divisionDiv").hide();
                $("#fieldDiv").hide();
                $("#unit-table").DataTable();
                $("#role-table").DataTable();
                $("#service-table").DataTable();
                $("#section-table").DataTable();
                $("#field-office-table").DataTable();
                $("#pesticide-table").DataTable();
                $("#crop-category-table").DataTable();
                $("#crop-table").DataTable();
                $("#species-table").DataTable();
                $("#chemical-table").DataTable();
                $("#variety-table").DataTable();
                $("#fodder-variety-table").DataTable();
                $("#plant-fodder-table").DataTable();
                $("#ornamental-table").DataTable();
                $("#product-table").DataTable();
                $("#location-table").DataTable();
                $("#details-table").DataTable();
                $('#complaint_table').DataTable();
                $('#commodity_draft_table').DataTable();
                $('#payment_pending_table').DataTable();
                $('#client-table').DataTable();
                $('#registered-client-table').DataTable();
                $('#species-breed-table').DataTable();
                $('#livestock-product-table').DataTable();
                $('#certificate_gap_table').DataTable();
                $('#certificate_org_table').DataTable();
                $('#certificate_fpc_table').DataTable();
                $('#certificate_1_table').DataTable();
                $('#certificate_2_table').DataTable();
                $('#certificate_3_table').DataTable();
                $('#certificate_4_table').DataTable();
                $('#certificate_5_table').DataTable();
                $('#certificate_6_table').DataTable();
                $('#certificate_7_table').DataTable();
                $('#certificate_8_table').DataTable();
                $('#certificate_9_table').DataTable();
                $('#certificate_10_table').DataTable();
                $('#certificate_11_table').DataTable();
                $('#certificate_12_table').DataTable();
                $('#certificate_13_table').DataTable();
                $('#certificate_14_table').DataTable();
                $('#certificate_15_table').DataTable();
                $('#feedback_table').DataTable();
                $("#agro").hide();
                $("#agro_import").hide();
                $("#Cordyceps").hide();
                $('#f_email_div').hide();


                if($("#applicationNo").val() == "")
                {
                    $("#pills-profile-tab").prop('disabled', true);
                    $("#pills-profile-file").prop('disabled', true);
                    $("#pills-complaint-file").prop('disabled', true);
                    $("#pills-phyto-file").prop('disabled', true);
                    $("#cordyceps-file-attachment").prop('disabled', true);
                    $('#pills-details').prop('disabled', true);
                    $("#mortem-file-attach").prop('disabled', true);
                    $("#pills-crop-production").prop('disabled', true);
                    $("#pills-wild-collection").prop('disabled', true);
                    $("#pills-animal-husbandry").prop('disabled', true);
                    $("#pills-aquaculture").prop('disabled', true);
                    $("#pills-apiculture").prop('disabled', true);
                    $("#pills-processing-unit").prop('disabled', true);
                    $("#organic-file-attach").prop('disabled', true);
                    $("#certification_standards").prop('disabled', true);
                    $("#pills-nc").prop('disabled', true);
                    $("#pills-seized-item").prop('disabled', true);
                    $('#pills-sample-collection').prop('disabled', true);
                    $('#file-attach').prop('disabled', true);
                    $("#import-profile-tab").prop('disabled', true);
                    $("#pills-import-file").prop('disabled', true);
                    $("#pills-seed-certification-details").prop('disabled', true);
                    $("#pills-seed-certification-file").prop('disabled', true);
                    $("#movement-profile-tab").prop('disabled', true);
                    $("#movement-profile-file").prop('disabled', true);
                    $("#pills-outsourced-details").prop('disabled', true);
                    $("#pills-food-handler").prop('disabled', true);
                    $("#fbr-file-attach").prop('disabled', true);
                    $("#pills-food-import-details").prop('disabled', true);
                    $("#pills-food-import-file").prop('disabled', true);
                    $("#pills-export-file").prop('disabled', true);
                    $("#pills-training-file").prop('disabled', true);

                    $("#pills-farmers-group").prop('disabled', true);
                    $("#pills-crop-production").prop('disabled', true);
                    $("#pills-pack-house").prop('disabled', true);
                    $("#certification_standards").prop('disabled', true);
                    $("#file-attach").prop('disabled', true);

                    $("#pills-wild-collection").prop('disabled', true);
                    $("#pills-animal-husbandry").prop('disabled', true);
                    $("#pills-aquaculture").prop('disabled', true);
                    $("#pills-apiculture").prop('disabled', true);
                    $("#pills-processing-unit").prop('disabled', true);
                    $("#organic-file-attach").prop('disabled', true);

                    $("#pills-lp-details").prop('disabled', true);
                    $("#pills-lp-file").prop('disabled', true);

                    $("#seed_details").prop('disabled', true);
                    $("#pills-nursery-seed-details").prop('disabled', true);
                    $("#pills-nursery-seed-file").prop('disabled', true);
                    $("#fpc_file-attach").prop('disabled', true);
                    $("#no_tab").prop('disabled', true);
                }
                if($("#referenceNo").val() == "")
                {
                    $("#pills-profile-tab").prop('disabled', true);
                    $("#pills-profile-file").prop('disabled', true);
                    $('#pills-details').prop('disabled', true);
                }
                if($("#referenceNo").val() != "")
                {
                    $("#pills-profile-tab").prop('disabled', false);
                    $("#pills-profile-file").prop('disabled', false);
                    $('#pills-details').prop('disabled', false);
                }
                if($("#nursery_applicationNo").val() == "")
                {
                    $("#pills-profile-tab").prop('disabled', true);
                    $("#pills-profile-file").prop('disabled', true);
                }
            });

            function save_form()
            {
                var commodity = $('#commodity').val();
                var qty = $('#qty').val();
                var remarks = $('#remarks').val();
                var unit = $('#unit').val();

                if(commodity == "")
                {
                    $('#commodityErrorMsg').html("Enter Commodity.");
                    $('#commodityErrorMsg').show();
                    $('#commodityErrorMsg').delay(2000).fadeOut('slow');
                }
                else if(qty == "")
                {
                    $('#qtyErrorMsg').html("Enter Quantity.");
                    $('#qtyErrorMsg').show();
                    $('#qtyErrorMsg').delay(2000).fadeOut('slow');
                }
                else if(remarks == "")
                {
                    $('#remarksErrorMsg').html("Enter Remarks.");
                    $('#remarksErrorMsg').show();
                    $('#remarksErrorMsg').delay(2000).fadeOut('slow');
                }
                else if(unit == "")
                {
                    $('#unitErrorMsg').html("Select Unit.");
                    $('#unitErrorMsg').show();
                    $('#unitErrorMsg').delay(2000).fadeOut('slow');
                }
                else{
                    $.ajax({
                        type : "POST",
                        url : "{% url 'save_details_movement' %}",
                        data : $('#save_form').serialize(),
                        success : function(responseText) {
                           $('#add_details').modal('hide');
                           $('#Details').html(responseText);
                           $('#pills-profile-tab').tab('show');
                           $('.modal-backdrop').remove();
                        }
                    });
                }
            }



            function forwardApplication(application_id)
            {
                forwardTo = $('#forwardTo').val();

                $.ajax({
                    type : "POST",
                    url : "{% url 'forward_application' %}",
                    data :{'application_id':application_id ,'forwardTo':forwardTo, csrfmiddlewaretoken: '{{ csrf_token }}'},
                    success : function(data) {
                        $('#application-details-modal').modal('hide');
                        $('#submitMsg').show();
                        setTimeout(function() {
                            $("#submitMsg").hide('blind', {}, 500)
                        }, 2000);
                        setTimeout(function() {
                            $('#application-details-modal').modal('hide');
                        }, 3000);
                        setTimeout(function()
                        {
                            location.reload();
                        }, 3000);

                    }
                });
            }


            function approveApplication(application_id)
            {
                Inspection_Leader = $('#teamLeader').val();
                Inspection_Team = $('#insTeam').val();
                remarks = $('#remarks').val();
                dateOfInspection = $('#dateOfInspection').val();

                $.ajax({
                    type : "POST",
                    url : "{% url 'approve_application' %}",
                    data :{'application_id':application_id , 'Inspection_Leader':Inspection_Leader ,'Inspection_Team':Inspection_Team ,'remarks':remarks , 'dateOfInspection':dateOfInspection , csrfmiddlewaretoken: '{{ csrf_token }}'},
                    success : function(data) {
                        location.reload();
                    }
                });
            }

            function rejectApplication(application_id)
            {
                Inspection_Leader = $('#teamLeader').val();
                Inspection_Team = $('#insTeam').val();
                remarks = $('#remarks').val();
                dateOfInspection = $('#dateOfInspection').val();

                $.ajax({
                    type : "POST",
                    url : "{% url 'reject_application' %}",
                    data :{'application_id':application_id , 'Inspection_Leader':Inspection_Leader ,'Inspection_Team':Inspection_Team ,'remarks':remarks , 'dateOfInspection':dateOfInspection , csrfmiddlewaretoken: '{{ csrf_token }}'},
                    success : function(data) {
                        $('#application-details-modal').modal('hide');
                        location.reload();
                    }
                });
            }

            function add_details(application_id)
            {
                currentObservation = $('#currentObservation').val();
                decisionConform = $('#decisionConform').val();

                $.ajax({
                    type : "GET",
                    url : "{% url 'add_details_ins' %}",
                    data :{'application_id':application_id,'currentObservation':currentObservation,'decisionConform':decisionConform},
                    success : function(data) {
                        $('#details').html(data);
                        $('#details').show();
                        $('#addModal').modal('hide');
                    }
                });
            }

            function save_details_form()
            {
                $('#pills-tab a:last').tab('show');
            }

            function show_attachmentModal()
            {
                $('#attachmentModal').modal('show');
            }

            function show_agro_attachmentModal()
            {
                $('#agro_attachmentModal').modal('show');
            }
        </script>
    </body>
</html>

